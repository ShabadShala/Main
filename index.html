<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
        
        <title>Chai Sutta Bar</title>
        <meta name="description" content="Biggest chai chain in India">    
        <meta name="robots" content="index, follow">
        <link rel="canonical" href="https://shabadshala.github.io/Chai-Sutta-Bar/">
        
        <link rel="manifest" href="manifest.json">
        
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "WebPage",
                "name": "Chai Sutta Bar - Bagha Purana",
                "description": "Experience the taste of chai, pizza, burger and other edibles at Bagha Purana.",
                "url": "https://shabadshala.github.io/Chai-Sutta-Bar/",
                "publisher": {
                    "@type": "Organization",
                    "name": "Shabad Shala",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://shabadshala.github.io/Chai-Sutta-Bar/icon-512.png"
                    }
                },
                "author": {
                    "@type": "Person",
                    "name": "Shabad Shala"
                },
                "image": "https://shabadshala.github.io/Chai-Sutta-Bar/icon-512.png",
                "mainEntityOfPage": "https://shabadshala.github.io/Chai-Sutta-Bar/"
            }
        </script>
        
        
        <style>
            
            /* Universal reset */
            *,
            *::before,
            *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            }                
            
            html {
            font-size: clamp(3px, 1vw, 4px);
            }            
            
            /* /* General Styles */
            body {
            font-family: Arial, sans-serif;
            background-color: #212121; /* Black background */
            color: white; /* White text */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 100vw;
            padding:2rem;       
            user-select: none; /* Prevents text selection */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            }
            
            
            
            /* Feedback Message */
            .feedback-message {
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            background: #333; /* Dark background */
            color: #fff; /* White text */
            padding: 2rem 2rem;
            border-radius: 1rem;
            font-size: 4rem;
            display: none;
            z-index: 3000;
            } 
            
            
            
            #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align towards top */
            }
            
            .loading-container {
            position: absolute;
            top: 50%; /* Set the center of spinner 40% from the top */
            transform: translateY(-50%); /* Adjust for proper centering */
            display: flex;
            flex-direction: column;
            align-items: center;
            }
            
            /* Spinner wrapper for positioning */
            .spinner-container {
            position: relative;  /* Allows absolute positioning inside */
            width: 25rem;
            height: 25rem;
            }
            
            /* Image centered inside spinner */
            .loading-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Perfect centering */
            width: 85%; /* Adjust size */
            height: auto;
            }
            
            /* Spinner animation */
            .spinner {
            border: 3.5rem solid rgba(255, 255, 255, 0.2); /* Semi-transparent white background */
            border-top: 3.5rem solid #fae68e; /* Chai color for the spinning part */
            border-radius: 50%;
            width: 100%;
            height: 100%;
            animation: spin 1.5s linear infinite;
            
            }
            
            @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
            }
            
            /* Loading message */
            .loading-message {
            margin-top: 5rem;
            font-size: 5rem;
            color: white;
            font-family: Arial, sans-serif;
            font-weight: bold;
            letter-spacing: 0.5rem;
            }
            
            
            
            
            /* Header container */
            .header {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 600px;
            position: fixed; /* Fix the header at the top */
            top: 0;
            left: 50%; /* Move the header to the center horizontally */
            transform: translateX(-50%);
            background-color: #212121; /* Match the body background */
            z-index: 1001; /* Ensure the header stays above other content */
            padding: 1.5rem; /* Adjust padding as needed */
            box-shadow: 0 0.4rem 3rem rgba(0, 0, 0, 0.1); /* Adds a subtle shadow */
            border-bottom: 1px solid #fae68e; /* Adds a border */                    
            }
            
            
            
            
            .scrollable {
            position: absolute; /* Fix the header at the top */
            }
            
            /* Logo text */
            .logo-text {
            text-align: center;
            font-size: 8rem;              
            font-weight: bold;
            white-space: nowrap;
            max-width: 100%;        
            position: relative; /* Required for absolute positioning of child */
            }
            
            .logo-text .chai {
            color: #fae68e;
            }
            
            .logo-text .sutta {
            color: red;
            }
            
            .logo-text .bar {
            color: white;
            }
            
            /* Vegetarian symbol */
            .logo-text .bpa-logo {
            font-size: 3rem; /* Set font size */
            color: #F8BBD0;
            position: absolute; /* Position absolutely within .logo-text */
            top: 0; /* Align to the top */
            right: -7rem; /* Move to the right of the text */
            vertical-align: top; /* Align to the top */
            }
            
            .open-close {
            font-size: 5rem;            
            }
            
            @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
            }
            .blink {
            animation: blink 1s infinite;
            }
            
            
            #main-content {
            flex: 1; /* Grow to fill remaining space */
            padding-top: 16rem; /* Add padding equal to the header height */
            scroll-padding-top: 20rem;
            overflow-y: auto; /* Allow scrolling for content */
            }
            
            
            
            /* Search */
            .search-container {
            width: 70%;
            max-width: 400px;
            margin: 2rem auto; 
            margin-bottom: 2rem;
            position: relative;
            display: none;
            }
            
            /* Flex container for input and clear button */
            .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            width: 100%;
            }
            
            #searchInput {
            width: 100%;
            padding: 1.5rem;
            padding-left: 11rem;
            padding-right: 11rem;
            font-size: 6rem;
            border: 1px solid #fae68e;  /* Converted 2px to 0.125rem */
            border-radius: 5rem;              /* Increased from 3rem to 5rem for more roundness */
            background-color: #f0f0f0;         /* Changed to a light background color */
            color: #333;                     /* Adjusted text color for better contrast */
            outline: none;
            }
            
            #searchInput::placeholder {
            color: #888;
            }
            
            .clear-btn {
            position: absolute;
            right: 2.5rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 10rem;
            color: black;
            z-index: 10;
            }
            
            .clear-btn:hover {
            color: red;
            }
            
            /* Search Lens (Magnifying Glass Icon) */
            .search-lens {
            position: absolute;
            left: 2.2rem; /* Adjust based on input padding */
            font-size: 5rem;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            }
            
            /* Hide the lens if input has text */
            .hide-lens .search-lens {
            display: none;
            }
            
            /* Animate the lens when hovering on the search bar */
            .search-input-wrapper:hover .search-lens {
            animation: shake 0.5s ease-in-out;
            }
            
            /* Shake Animation */
            @keyframes shake {
            0% {
            transform: translateX(0);
            }
            25% {
            transform: translateX(-0.3125rem); /* 5px ‚âà 0.3125rem */
            }
            50% {
            transform: translateX(0.3125rem);  /* 5px ‚âà 0.3125rem */
            }
            75% {
            transform: translateX(-0.3125rem); /* 5px ‚âà 0.3125rem */
            }
            100% {
            transform: translateX(0);
            }
            }
            
            
            
            
            #filterContainer {
            display: flex;
            justify-content: center; /* Centers the entire content */
            align-items: center; /* Aligns items vertically */
            width: 100%; /* Ensures full width */
            margin-top: 1rem;  
            margin-bottom: 1rem; 
            font-size: 5rem;
            gap: 3rem; /* Gap between 3-button element and total-items-found */
            }
            
            .filter-label {
            color: #00FF00;
            }
            
            #filterButtons {
            display: flex;
            align-items: center;
            gap: 3rem; /* Gap between "Filter by" and 3-button element */
            }
            
            #threeButtonsContainer {
            display: flex;
            gap: 2rem; /* Space between buttons */
            padding: 1rem;
            position: relative; /* To position the background line */
            }
            
            #threeButtonsContainer::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 25%;
            width: 50%;
            height: 2rem; /* Adjust thickness as needed */
            background-color: #f0f0f0; /* Line color */
            z-index: -1; /* Puts it behind the buttons */
            transform: translateY(-50%); /* Centers the line */
            }
            
            
            .filter-btn {
            width: 10rem;
            padding: 1rem 2rem;
            color: #333;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 1rem;
            cursor: pointer;
            }
            
            .filter-btn.active {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;            
            }
            
            #total-items-found {
            color: white;
            text-align: left; /* Ensures right alignment */
            }
            
            
            
            /* Offers Button Styles */
            #offers-button {
            position: relative;
            margin: 0 auto;
            width: fit-content;
            background: linear-gradient(135deg, #fae68e, #ffcc66);
            color: #212121;
            border: none;
            border-radius: 0 0 5rem 5rem;
            padding: 1rem 3rem;
            font-size: 5rem;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: none; /* Hidden by default */
            z-index: 500;
            animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite alternate;
            }
            
            /* Floating Animation */
            @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-0.5rem); }
            100% { transform: translateY(0); }
            }
            
            /* Glow Effect */
            @keyframes glow {
            0% { box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); }
            100% { box-shadow: 0 6px 15px rgba(255, 204, 102, 0.7); }
            }
            
            /* Hover Effect */
            #offers-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 204, 102, 0.9);
            }
            
            
            #offers-container {
            width: 100%;
            max-width: 450px;
            margin: 3rem auto;
            display: none;
            text-align: center;
            }
            
            /* Offer Section Styles */
            .offer-container {
            
            margin: 2rem auto;
            max-width: 600px;
            }
            
            .offer-item {
            background: #333;
            border-radius: 3rem;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.2s ease;
            border: 2px solid #CCFFE6;
            }
            
            
            
            .offer-title {
            color: #fae68e;
            font-size: 6rem;
            margin-bottom: 1rem;
            }
            
            .offer-dates {
            color: #40E0D0;
            font-size: 5rem;
            margin-bottom: 1rem;
            }
            
            .offer-description {
            color: #ccc;
            font-size: 4.5rem;
            line-height: 1.4;
            }
            
            
            
            
            
            
            
            
            
            #menu {
            margin: 0 auto; /* Centers the menu */            
            width: 100%; /* Default width for small screens */
            max-width : 600px;
            transition: width 0.3s ease;
            }
            
            .category-header {
            background-color: transparent;
            font-size: 6rem;
            font-weight: bold;
            font-family: 'Comic Sans MS';
            cursor: pointer;
            padding: 2rem 1rem; 
            display: flex;
            justify-content: space-between;
            color: #fae68e;
            align-items: center;            
            }
            
            .category-header:hover {
            transform: translateY(2px);
            }
            
            .category-header .left {
            font-weight: bold;        
            text-align: left;
            }
            
            .category-header .right {
            font-size: 5rem;
            text-align: right;
            white-space: nowrap;
            color: #40E0D0;
            }
            
            .category-items {
            padding-left: 1rem;
            padding-right: 1rem;
            padding-bottom: 0; /* Adds space after last item */
            }            
            
            .category-header.visible-border {
            border: 2px solid #F8BBD0;
            border-bottom: none;
            border-radius: 3rem 3rem 0 0;    
            }
            
            .category-items.visible-border {
            border: 2px solid #F8BBD0;
            border-top: none;
            border-radius: 0 0 3rem 3rem;
            margin-bottom: 2rem;
            }
            
            /* Menu items */
            .menu-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(221, 221, 221, 0.3);            
            }
            
            .menu-item:first-child {
            border-top: 0;
            }
            
            .menu-item:last-child {
            border-bottom: none;
            margin-bottom: 1rem !important;
            }
            
            .menu-item-title {
            font-weight: bold;
            font-size: 5rem;
            }
            
            .menu-item-line {
            display: flex;
            justify-content: space-between;
            }
            
            .colAB, .colCDE {
            font-size: 5rem;
            font-weight: bold;
            }
            .colCDE {
            color: #40E0D0;
            }
            
            
            
            /* Footer Container Styling */
            .footer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 90%;
            max-width: 500px;
            margin: 3rem auto;
            }            
            
            /* Footer styling */
            .footer {
            background-color: #e64545;
            text-align: center;
            padding: 2rem 1rem; /* Adjust padding for small screens */
            color: white;
            margin-top: auto; /* Pushes footer down */
            margin-bottom: 2rem;
            display: none; 
            }
            
            .footer a {
            text-decoration: none;
            }
            
            /* Adjust font sizes for small screens */
            .footer .color1 {
            font-size: 3.8em;
            font-weight: bold;
            color: white;
            }
            
            .footer .color2 {
            font-size: 3.7em;
            font-weight: bold;
            color: #f5d56b;
            }
            
            .footer .color3 {
            font-size: 4em;
            font-weight: bold;
            text-decoration: none;
            color: blue;
            }
            
            .signature {
            background-color: #212121;
            color: #fae68e; /* Signature text color */
            font-size: 4rem;
            text-align: center;
            padding: 1rem;
            margin-top: 1rem; /* Ensures it's at the bottom */
            }   
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /* Hamburger Icon Styling */
            #hamburger-button {
            position: fixed;
            top: 2rem;
            left: 3rem;
            z-index: 1001;
            cursor: pointer;
            padding: 2rem;
            background: rgba(33, 33, 33, 0.8);
            border-radius: 50%;
            width: 10rem;
            height: 10rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            }
            
            .hamburger-lines {
            width: 100%;
            height: 100%;
            position: relative;
            }
            
            .hamburger-lines .line {
            position: absolute;
            width: 100%;
            height: .8rem;
            background: #fae68e;
            border-radius: 1rem;
            transition: all 0.3s ease;
            }
            
            .hamburger-lines .line:nth-child(1) {
            top: 20%;
            transform: translateY(-50%);
            }
            
            .hamburger-lines .line:nth-child(2) {
            top: 50%;
            transform: translateY(-50%);
            }
            
            .hamburger-lines .line:nth-child(3) {
            top: 80%;
            transform: translateY(-50%);
            }
            
            #hamburger-button:hover {
            transform: scale(1.1);
            background: rgba(33, 33, 33, 1);
            }
            
            #hamburger-button:hover .line {
            background: #ffffff;
            }
            
            /* Add container styling */
            .hsidebar-container {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 600px;
            width: 100%;
            height: 100%;
            z-index: 1002;
            overflow: hidden;
            pointer-events: none; /* Allow clicks through container when closed */
            
            }
            
            /* Update existing #hsidebar styling */
            #hsidebar {
            position: absolute;
            top: 0;
            left: -100%;
            width: 75%;
            height: 100%;
            background: #1c1c1c;
            backdrop-filter: blur(8px);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
            transition: left 0.3s ease;
            z-index: 1002;
            padding-top: 40px;
            border-radius: 0 15px 15px 0;
            color: #e0e0e0;
            pointer-events: auto; /* Enable clicks when visible */
            padding:5rem;
            }
            
            #hsidebar.open {
            left: 0;
            }
            
            /* Sidebar Content */
            .hsidebar-content {
            
            }
            
            .hsidebar-option {
            padding: 1rem;
            margin: 3rem;
            cursor: pointer;
            font-size: 5rem;
            font-weight: 500;
            text-align: left;            
            color: #e0e0e0;            
            transition: background 0.3s ease, transform 0.3s ease;
            }
            
            .hsidebar-option:hover {
            background-color: #555;  /* Adjust the background color on hover */
            color: #fff; /* Change text color on hover */
            }
            
            /* Backdrop to Lock Scroll */
            #sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* Slightly darker backdrop */
            z-index: 1001;
            }
            
            /* QR Code Modal */
            #qr-code-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1003;
            overflow: hidden; /* Prevents overflow */
            }
            
            /* Modal Content */
            #qr-code-modal .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2a2a2a;
            padding: 20px;
            border-radius: 12px;
            color: #f1f1f1;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.7);
            width: 90%; /* Ensure modal width is 90% of screen width */
            max-width: 400px; /* Optional: Limit the maximum width */
            height: auto; /* Height should adjust based on content */
            }
            
            /* QR Code Image */
            #qr-code-modal .modal-content img {
            width: 100%;  /* Full width */
            height: auto;  /* Maintain aspect ratio */
            max-width: 100%;  /* Prevents overflow */
            object-fit: contain; /* Ensure the whole image is visible */
            }
            
            #close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.6rem;
            cursor: pointer;
            color: #f1f1f1;
            }
            
            #close-modal:hover {
            color: #ff5555; /* Red color on hover for contrast */
            }
            
            /* Style for the CSB text */
            .sidebar-title {
            font-size: 6rem;
            text-align: center;
            font-weight: bold;
            color: white; /* Change to your preferred color */
            margin-bottom: 20px; /* Optional: Adds space below the CSB text */
            }
            
            .footer-text {
            position: absolute;
            bottom: 6rem;
            font-size: 4rem;
            color: #f1f1f1;
            text-align: left;
            line-height: 1.5;
            margin-left: 5rem;
            }
            
            /* New styles for flex alignment */
            .footer-content {
            display: flex;
            align-items: center;
            gap: 3rem; /* Space between icon and text */
            }
            
            /* Style for the icon */
            .footer-logo {
            width: 8rem; /* Adjust size as needed */
            height: 8rem;
            object-fit: contain;
            border-radius: 15px; /* Optional: rounded corners */
            }
            
            
            /* Close button */
            #close-sidebar {
            position: absolute;
            top: 2rem;
            right: 2rem;
            font-size: 8rem;
            color: #f1f1f1; /* Lighter color for contrast */
            cursor: pointer;
            z-index: 1003; /* Ensures it is on top of other content */
            }
            
            #close-sidebar:hover {
            color: #ff5555; /* Change to red on hover */
            }
            
            .menu-icon {
            width: 1em;
            height: 1em;
            margin-right: 4rem;            
            vertical-align: middle;
            }
            
            .invert-icon {
            filter: invert(1); /* Inverts black to white */
            }
            
            .green-icon {
            /* For <img> tag */
            filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(86deg) brightness(118%) contrast(119%);            
            /* For inline SVG */
            fill: green;
            }
            
            
            
            /* Options alignment */
            .hsidebar-option {
            display: flex;
            align-items: center;
            }
            
            .hsidebar-option.disabled-option {
            color: #666 !important;
            opacity: 0.7;
            cursor: default;
            pointer-events: none;
            }
            
            .hsidebar-option.disabled-option .menu-icon {
            filter: grayscale(100%) brightness(0.5);
            } 
            
            
            
            
            
            
            
            
            
            #sidebar {
            position: fixed;
            right: -100px; /* Initially hidden off the screen */
            top: 50%;
            transform: translateY(-50%); /* Vertically center the sidebar */
            width: 60px; /* Set the width to fit the logos */
            background-color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0;
            transition: right 0.3s ease;
            z-index: 1000; /* Ensure sidebar is on top */
            box-shadow: -3px 0 5px rgba(0, 0, 0, 0.5); /* Optional shadow for better visibility */
            }
            
            #sidebar a {
            margin: 10px 0;
            text-decoration: none;
            }
            
            #sidebar .logo {
            width: 10rem;
            height: 10rem;
            transition: transform 0.3s ease; /* Smooth zoom-in effect */
            }
            
            #sidebar .logo.hovered,
            #sidebar .logo:hover {
            transform: scale(1.3); /* Zoom-in effect when hovering */
            }
            
            
            #sidebar.open {
            right: 0; /* Show sidebar when open */
            }
            
            #sidebar-indicator {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4rem;
            height: 6rem;
            cursor: pointer;
            z-index: 999;
            transition: all 0.3s ease;
            padding: 1rem;
            background: rgba(133, 33, 33, 0.8);
            border-radius: 50% 0 0 50%;
            filter: invert(1);
            }
            
            #sidebar-indicator:hover {
            transform: translateY(-50%) scale(1.1);
            background: rgba(33, 33, 33, 1);
            }
            
            @keyframes pulse {
            0% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.1); }
            100% { transform: translateY(-50%) scale(1); }
            }      
            
            
            
            
            
            
            
            
            
            
            
            
            
            #scrapButton {
            all: unset; /* Reset all styles */
            position: fixed;
            bottom: 4rem;
            right: calc(50% - 300px + 3rem); /* Align with 600px centered menu */
            font-size: 5rem;
            cursor: pointer; /* Pointer for better UX */
            z-index: 1001;
            
            /* Circular button */
            width: 14rem;
            height: 14rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #CD5C5C; /* Single solid color */
            border-radius: 50%; /* Makes it a circle */
            box-shadow: 0 0 15px #CD5C5C; /* Glow effect */
            }
            
            
            
            
            #scrapButton img {
            transition: opacity 0.3s ease, filter 0.3s ease;
            pointer-events: none; /* Ensure this remains */
            }            
            
            #scrapButton img.dimmed {
            opacity: 0.5;
            filter: grayscale(50%);
            }
            
            /* Green when items present */
            #scrapButton.has-items img {
            filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(86deg) brightness(118%) contrast(119%) !important;
            }
            
            @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
            }
            
            @media (max-width: 600px) {
            #scrapButton {
            right: 5rem; /* Default positioning for mobile */
            }
            }
            
            /* Hover effect */
            #scrapButton:hover {
            transform: scale(1.1); /* Slightly enlarge on hover */
            }
            
            #scrapButton.anti-hover:hover {
            transform: none; /* Prevents scaling */
            pointer-events: none; /* Optional: Prevents any interaction */
            }
            
            /* Active effect */
            #scrapButton:active {
            cursor: grabbing; /* Change cursor to grabbing when clicked */
            }
            
            #scrapButton .counter-badge {
            position: absolute;
            top: 2rem;
            left:58%;
            transform: translateX(-55%);
            color: white;
            font-weight: bold;
            font-size: 3rem;
            font-weight: bold;
            background: none;
            width: auto;
            height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: none;
            border-radius: 0;
            }
            
            
            /* Scrap List Modal */
            #scrapList {
            display: none;
            position: fixed;
            top: 9% !important;
            left: 50% !important;
            transform: translateX(-50%);
            width: 350px;
            max-width: 90vw;
            max-height: 90vh;
            background: rgba(255, 255, 255, 0.95);
            z-index: 2000;
            border-radius: 1rem;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            /* Remove overflow: auto; */
            }
            
            /* Scrap Content - Fields inside scrap list */
            .scrap-content {
            position: relative;
            background: #f5f5f5;
            width: 100%;
            max-width: 350px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 1rem;
            color: #333;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }
            
            /* Scrap Items Container */
            #scrapItemsContainer {
            width: 100%;
            overflow-x: hidden;
            }
            
            /* Scrap Items */
            #scrapItems {
            max-height: 60vh; /* Adjust this value as needed */
            overflow-y: auto; /* Only this container will scroll */
            }
            
            /* Scrap Item Row */
            .scrap-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
            font-size: 4rem;
            color: #333;
            width: 100%;
            gap: 1rem;
            }
            
            /* Item Name */
            .scrap-item-name {
            flex: 3;
            overflow: hidden;
            word-wrap: break-word;
            white-space: normal;
            min-width: 100px;
            }
            
            /* Rate Container */
            .scrap-item-rate {
            flex: 2;
            text-align: right;
            padding: 0 1rem;
            min-width: 50px;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            }
            
            /* Updated Title Style */
            .scrap-content h2 {
            text-align: center;
            margin: 2rem 0;
            }
            
            /* Total Price Alignment */
            #totalPrice {
            text-align: right;
            padding-right: 2rem;
            font-size: 5rem;
            font-weight: bold;
            color: #333;
            }
            
            #pinScrap {
            position: absolute;
            top: 0;
            left: 1rem;
            font-size: 4rem;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            z-index: 1;
            color: #333;
            }
            
            /* Close Button of scrap list */
            #closeScrap {
            position: absolute;
            top: 0;
            right: 1rem;
            font-size: 6rem;
            cursor: pointer;
            color: #333;
            }
            
            /* Delete Button */
            .delete-btn {
            cursor: pointer;
            color: #cc0000;
            font-size: 4rem;
            margin-left: 1rem;
            }
            
            .button-container {
            display: flex;
            justify-content: center;
            gap: 4rem;
            }
            
            #orderScrap, #clearScrap {
            display: inline-block;
            padding: 1rem 3rem;
            background-color: #cc0000;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 4rem;
            cursor: pointer;
            }
            
            #orderScrap {
            background-color: #28a745;
            }
            
            #orderScrap:hover {
            background-color: #218838;
            }
            
            @keyframes washOutEffect {
            0% { opacity: 1; transform: translateX(0) skewX(0deg); filter: blur(0px); }
            30% { opacity: 0.8; transform: translateX(-10px) skewX(-5deg); filter: blur(2px); }
            60% { opacity: 0.5; transform: translateX(-30px) skewX(-10deg); filter: blur(4px); }
            100% { opacity: 0; transform: translateX(-100px) skewX(-15deg); filter: blur(8px); }
            }
            
            .wash-out-animation {
            animation: washOutEffect 0.8s ease-in-out forwards;
            }
            
            .qty-stepper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #f5f5f5;
            border: 1px solid red;
            border-radius: 0.5rem;
            padding: 0.5rem;
            margin-right: auto;
            }
            
            .decrement-btn, .increment-btn {
            cursor: pointer;
            background: none;
            border: none;
            font-size: 5rem;
            padding: 0 1rem;
            color: #333;
            transition: background-color 0.2s ease;
            }
            
            .decrement-btn:hover, .increment-btn:hover {
            background-color: #ddd;
            }
            
            .decrement-btn:disabled {
            background-color: #ccc !important; /* Gray background */
            color: transparent !important; /* Transparent text color */
            cursor: not-allowed !important; /* Change cursor */
            opacity: 0; /* Set opacity to 0 */
            pointer-events: none; /* Disable hover effect */
            }
            
            
            .qty-display {
            font-size: 4rem;
            min-width: 2rem;
            text-align: center;
            color: #333;
            }
            
            /* Rate Text */
            .scrap-item-rate > span {
            white-space: nowrap;
            margin-left: auto;
            }
            
            
            
            
            /* Modal Overlay */
            .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Darker semi-transparent background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* Ensure it's on top of everything */
            backdrop-filter: blur(5px); /* Adds a blur effect to the background */
            }
            
            /* Modal Content */
            .modal-content {
            background: #212121; /* Dark background to match your theme */
            color: #fae68e; /* Accent color for text */
            padding: 4rem;
            border-radius: 2rem;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); /* Subtle shadow */
            border: 2px solid #fae68e; /* Accent border */
            animation: fadeIn 0.3s ease-in-out; /* Smooth fade-in animation */
            }
            
            /* Title Styling */
            .modal-content p {
            font-size: 5rem;
            font-weight: bold;
            color: #fae68e; /* Accent color */
            margin-bottom: 3rem;
            }
            
            /* List Styling */
            .modal-content ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            }
            
            .modal-content ul li {
            font-size: 4rem;
            color: #ffffff; /* White text for better readability */
            margin: 2rem 0;
            line-height: 1.5;
            }
            
            /* Close Button */
            .close-button {
            position: absolute;
            top: 2rem;
            right: 2rem;
            font-size: 6rem;
            cursor: pointer;
            color: #fae68e; /* Accent color */
            transition: color 0.3s ease;
            }
            
            .close-button:hover {
            color: #ff4d4d; /* Red color on hover for better feedback */
            }
            
            /* Toggle Button Container */
            .toggle-container {
            margin-top: 3rem;
            }
            
            /* Split Toggle Button */
            .split-toggle {
            display: flex;
            width: 30rem;
            height: 8rem;
            border-radius: 5rem;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #fae68e; /* Accent border */
            margin: 0 auto; /* Center the toggle */
            }
            
            .toggle-half {
            flex: 1;
            text-align: center;
            line-height: 8rem; /* Center text vertically */
            font-size: 4rem;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #fae68e; /* Accent color */
            }
            
            .toggle-half:first-child {
            border-top-left-radius: 5rem;
            border-bottom-left-radius: 5rem;
            }
            
            .toggle-half:last-child {
            border-top-right-radius: 5rem;
            border-bottom-right-radius: 5rem;
            }
            
            .toggle-half.active {
            background: #fae68e; /* Accent background */
            color: #212121; /* Dark text for contrast */
            }
            
            .toggle-half:not(.active) {
            background: transparent;
            color: #fae68e; /* Accent color */
            }
            
            /* Fade-in Animation */
            @keyframes fadeIn {
            from {
            opacity: 0;
            transform: scale(0.9);
            }
            to {
            opacity: 1;
            transform: scale(1);
            }
            }
            
            
            
            
            
            
            #counterContainer {
            display: flex;
            justify-content: center; /* Centers them */
            align-items: center; /* Aligns vertically */
            gap: 2rem; /* Adds space between them */
            }
            
            
            @import url('https://fonts.cdnfonts.com/css/digital-7'); /* Import Digital-7 Font */
            
            
            #visitorCounter,
            #viewsCounter {
            font-family: 'Digital-7', 'Courier New', monospace; /* Digital font */
            font-size: 4rem;
            color: #fae68e;
            background-color: black;
            padding: 1rem 2rem;
            border-radius: 10px;
            display: inline-block;
            text-align: center;
            letter-spacing: 0.2rem;
            box-shadow: 0px 0px 10px rgba(0, 255, 0, 0.8); /* Glowing effect */
            
            }
            
            
            
            
            
            /* Like Container */
            #likeContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem; /* Reduced padding */
            width: 26.25%; /* 75% of original 35% */
            min-width: 100px; /* 75% of original 100px */
            border: 2px solid #fae68e;
            border-radius: 1.5rem; /* Reduced border radius */
            font-size: 5.25rem; /* 75% of original 7rem */
            font-weight: bold;
            color: #fae68e;
            margin: 3rem auto; /* Reduced margin */
            margin-bottom: 5rem;
            }
            
            /* Like Icon */
            #likeIcon {
            width: 6rem; /* 75% of original 8rem */
            height: 6rem; /* 75% of original 8rem */
            filter: invert(0.8);
            transition: filter 0.3s ease;
            }
            
            /* Like Counter */
            @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
            }
            
            .like-animate {
            animation: pop 0.3s ease-in-out;
            }
            
            /* Update your existing like counter styles */
            #likeCounter {
            font-size: 5.25rem;
            margin-left: -2.25rem;
            display: inline-block; /* Required for animation */
            }
            
            
            #likeIcon.liked {
            filter: invert(70%) sepia(90%) saturate(400%) hue-rotate(360deg);
            }
            
            
            
            
            
            
        </style>
    </head>
    <body>
        
        <!-- Loading Overlay -->
        <div id="loadingOverlay">
            <div class="loading-container">
                <div class="spinner-container">
                    <div class="spinner"></div>
                    <img src="veg.png" alt="Loading" class="loading-image">
                </div>
                <div class="loading-message">Loading</div>
            </div>
        </div>
        
        <!-- Header -->
        <div class="header">           
            <div class="logo-text">
                <span class="chai">CHAI</span>
                <span class="sutta">SUTTA</span>
                <span class="bar">BAR</span>
                
                <span class="bpa-logo">BPA</span>
                <div class="open-close"></div>               
            </div>
            
            
        </div>
        
        
        
        <div id="scrapList">
            <div class="scrap-content">
                <button id="pinScrap">üìå</button>
                <div id="closeScrap">√ó</div>
                <h2 style="font-size: 6rem;">Order List</h2>
                <div id="scrapItemsContainer">
                    <div id="scrapItems"></div>
                    <!-- Total price aligned below the rate column -->
                    <div id="totalPrice" style="font-size: 4rem; text-align: right; margin: 2rem 0; font-weight: bold;">Total: ‚Çπ0</div>
                </div>
                <div class="button-container">
                    <button id="orderScrap">Order</button>
                    <button id="clearScrap">Clear</button>
                </div>
                
            </div>
        </div> 
        
        
        
        <!-- Main Content Wrapper -->
        <div id="main-content">
            <button id="offers-button"></button>
            <div id="offers-container" class="offer-container"></div>
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-input-wrapper">
                    <span id="magnifierIcon" class="search-lens">&#128270;</span>
                    <input type="text" id="searchInput" maxlength="10" placeholder="item or rate" />
                    <span id="clearButton" class="clear-btn" style="display: none;">√ó</span>
                </div>
            </div>
            
            
            
            <!-- Filter Container -->
            <div id="filterContainer">
                <div id="filterButtons" style="display: none;">
                    <div class="filter-label">Filter by</div>
                    <div id="threeButtonsContainer">
                        <button class="filter-btn active" data-filter="=">=</button>
                        <button class="filter-btn" data-filter="<="><=</button>
                            <button class="filter-btn" data-filter=">=">>=</button>
                        </div>
                        </div>
                        <div id="total-items-found"></div>
                    </div>
                    
                    <!-- Menu -->
                    <div id="menu">
                        <button id="scrapButton">
                            <img src="icons/food.svg" class="invert-icon" alt="Edit Icon" width="40" height="40">
                            <div class="counter-badge"></div>
                        </button>
                        
                        
                    </div>
                </div>
                
                <div class="feedback-message"></div>
                
                <!-- Footer Container -->
                <div class="footer-container">
                    <!-- Footer -->
                    <div class="footer">
                        <div class="color1">Opp. Petrol Pump, Kotkapura Road</div>
                        <div class="color2">Bagha Purana (Moga) Punjab</div>
                        <div class="color3">
                            Ph: <a href="tel:+919112400010">91124-00010</a>, <a href="tel:+919023406002">90234-06002</a>
                        </div>
                    </div>
                    
                    
                    <div id="counterContainer">
                        <div id="visitorCounter">Users: üë§</div>
                        <div id="viewsCounter">Views: üëÅ</div>
                    </div>
                    <div class="signature">Developed by Komal Brar</div>        
                </div>
                
                
                
                <!-- Sidebar -->
                <div id="sidebar">
                    <a id="delivery-link" href="#"><img src="sidebar/delivery.png" alt="Delivery number" class="logo"></a>
                    <a id="whatsapp-link" href="#"><img src="sidebar/whatsapp.png" alt="Chat on WA" class="logo"></a>
                    <a id="phone-link" href="#"><img src="sidebar/phone.png" alt="Phone" class="logo"></a>
                    <a href="https://maps.app.goo.gl/AhjPPKMp7NJvBphDA"><img src="sidebar/location.png" alt="Location" class="logo"></a>
                    <a href="https://www.facebook.com/p/Chai-Sutta-Bar-open-close-61553478237898/"><img src="sidebar/facebook.png" alt="Facebook" class="logo"></a>
                    <a href="https://www.instagram.com/chaisuttabar_baghapurana/?hl=en"><img src="sidebar/insta.png" alt="Instagram" class="logo"></a>
                </div>
                
                
                
                <script>
                    
                    document.addEventListener('contextmenu', event => event.preventDefault());
                    document.addEventListener('copy', event => event.preventDefault());
                    document.addEventListener('cut', event => event.preventDefault());
                    document.addEventListener('paste', event => event.preventDefault());
                    
                    // let whatsappOfferNumber = '918968444425'; // Default value as fallback
                    let cachedOrderNumber = null;
                    
                    
                    
                    function showFeedback(message) {
                        const feedback = document.querySelector('.feedback-message');
                        feedback.textContent = message;
                        feedback.style.display = 'block';
                        setTimeout(() => {
                            feedback.style.display = 'none';
                        }, 1000);
                    }
                    
                    
                    function updateScreenSize() {
                        const width = window.innerWidth;
                        const height = window.innerHeight;
                        
                        const header = document.querySelector('.header');
                        
                        // If width is greater than or equal to height, make header scrollable
                        if (width >= height) {
                            header.classList.add('scrollable'); // Make header scrollable
                            } else {
                            header.classList.remove('scrollable'); // Keep header fixed
                        }
                    }                    
                    // Listen for window resizing
                    window.addEventListener('resize', updateScreenSize);                    
                    // Call the function initially to set the correct behavior based on current screen size
                    updateScreenSize();
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    let selectedFilter = "="; // Default to "="                                        
                    function filterMenuItems(searchQuery) {
                        const menuDiv = document.getElementById('menu');
                        if (!menuDiv) return;
                        
                        
                        const menuItems = document.querySelectorAll('.menu-item');
                        const categoryHeaders = document.querySelectorAll('.category-header');
                        const categoryItems = document.querySelectorAll('.category-items');
                        
                        let totalVisibleItems = 0;
                        
                        
                        const normalizedSearchQuery = searchQuery.trim().toLowerCase();
                        const isNumberSearch = /^\d+$/.test(normalizedSearchQuery); // Check if the search query is a number                        
                        
                        // Show/hide filter buttons based on whether the search query is a number
                        const filterButtons = document.getElementById('filterButtons');
                        if (isNumberSearch) {
                            filterButtons.style.display = 'flex'; // Show filter buttons
                            } else {
                            filterButtons.style.display = 'none'; // Hide filter buttons
                        }
                        
                        // Get the selected filter type (=, <=, >=)
                        // Use the globally selected filter type
                        const filterType = selectedFilter;
                        
                        
                        // Convert the search query to a number
                        const searchNumber = isNumberSearch ? parseInt(normalizedSearchQuery, 10) : null;
                        
                        categoryHeaders.forEach((header, index) => {
                            const categoryItem = categoryItems[index];
                            const itemsInCategory = categoryItem.querySelectorAll('.menu-item');
                            
                            // Access the header's left and right parts (columns)
                            const leftPart = header.querySelector('.left')?.textContent.trim().toLowerCase() || '';
                            const rightPart = header.querySelector('.right')?.textContent.trim().toLowerCase() || '';
                            
                            // Combine the header text for searching
                            const headerText = `${leftPart} ${rightPart}`.trim();
                            
                            // Debug: Log the header text and split words
                            console.log("Header Text:", headerText);
                            console.log("Header Words:", headerText.split(/[\s,]+/).filter(word => word.length > 0));
                            
                            // Check if the header matches the search query
                            const isNumeric = !isNaN(normalizedSearchQuery); // Check if the search query is numeric
                            
                            const headerMatches = !isNumeric && headerText.split(' ').some(word => {
                                const splitWords = word.split('('); 
                                return splitWords.some(part => part.startsWith(normalizedSearchQuery));
                            });
                            
                            
                            let hasVisibleItemsInCategory = false;
                            
                            itemsInCategory.forEach(item => {
                                const colABElement = item.querySelector('.colAB');
                                const colCDEElement = item.querySelector('.colCDE');
                                const itemTextAB = colABElement ? colABElement.textContent.trim().toLowerCase() : '';
                                const itemTextCDE = colCDEElement ? colCDEElement.textContent.trim().toLowerCase() : '';
                                
                                let itemMatches = itemTextAB.includes('ml') || itemTextCDE.includes('ml') ? false : false;
                                
                                if (isNumberSearch) {
                                    // Extract numbers from the last three columns (colCDE)
                                    const numbersInCDE = itemTextCDE.match(/\d+/g) || [];
                                    itemMatches = numbersInCDE.some(numberStr => {
                                        const number = parseInt(numberStr, 10);
                                        switch (filterType) {
                                            case '=':
                                            return number === searchNumber;
                                            case '<=':
                                            return number <= searchNumber;
                                            case '>=':
                                            return number >= searchNumber;
                                            default:
                                            return false;
                                        }
                                        
                                    });                      
                                    } else {
                                    // Otherwise, check start-with words from all 5 columns (A, B, C, D, E)
                                    itemMatches = itemTextAB.split(' ').some(word => {
                                        const splitWords = word.split('('); 
                                        return splitWords.some(part => part.startsWith(normalizedSearchQuery));
                                        }) || itemTextCDE.split(' ').some(word => {
                                        const splitWords = word.split('('); 
                                        return splitWords.some(part => part.startsWith(normalizedSearchQuery));
                                    });
                                }
                                
                                if (headerMatches || itemMatches) {
                                    totalVisibleItems++;                                    
                                    item.style.display = 'block';
                                    hasVisibleItemsInCategory = true;
                                    hasVisibleItems = true;
                                    item.style.borderBottom = ''; // Reset border-bottom for all items
                                    
                                    } else {
                                    item.style.display = 'none';
                                }
                            });
                            
                            // Adjust the header display and styling based on matches
                            if (headerMatches || hasVisibleItemsInCategory) {
                                header.style.display = 'flex';
                                categoryItem.style.display = 'block';
                                header.classList.add('visible-border');
                                categoryItem.classList.add('visible-border');                                
                                header.style.fontSize = '6rem';  // Set font size for expanded header
                                header.querySelector('.right').style.display = 'inline';  // Show second column
                                } else {                                
                                header.style.display = 'none';
                                categoryItem.style.display = 'none';
                                header.classList.remove('visible-border'); // Ensure these lines exist
                                categoryItem.classList.remove('visible-border');
                                header.querySelector('.right').style.display = 'none';  // Hide second column
                            }
                            
                            // Now handle the last visible item in the category
                            const visibleItems = Array.from(itemsInCategory).filter(item => item.style.display === 'block');
                            if (visibleItems.length > 0) {    
                                const lastVisibleItem = visibleItems[visibleItems.length - 1];
                                lastVisibleItem.style.borderBottom = 'none'; // Remove border from the last visible item
                                lastVisibleItem.style.marginBottom = '2rem'; // Add this line
                            }
                            
                            
                            // Offers search code
                            const offersContainer = document.getElementById('offers-container');
                            offersContainer.innerHTML = ''; // Clear previous results
                            
                            const searchWords = normalizedSearchQuery.toLowerCase().split(/\s+/); // Split search query into words
                            
                            const matchedOffers = offersData.filter(offer => {
                                const titleWords = offer[1].toLowerCase().split(/\s+/); // Split Title into words
                                const descWords = offer[2].toLowerCase().split(/\s+/); // Split Description into words
                                
                                return searchWords.some(searchWord => 
                                titleWords.some(word => word.startsWith(searchWord)) || 
                                descWords.some(word => word.startsWith(searchWord))
                                );
                            });
                            
                            if (matchedOffers.length > 0) {
                                offersContainer.innerHTML = matchedOffers.map(offer => {
                                    const offerText = `üéä\n*${offer[1]}*\n(${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''})\n${offer[2]}\n„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞`;
                                    
                                    return `
                                    <div class="offer-item" style="position: relative;">
                                    <button class="send-whatsapp" onclick="sendOffer('${encodeURIComponent(offerText)}')" 
                                    style="position: absolute; top: 2rem; right: 2rem; background: #28a745; color: white; 
                                    border: none; padding: 1rem 2rem; border-radius: 2rem; font-weight: bold; cursor: pointer;">
                                    Order
                                    </button>
                                    <h2 class="offer-title">${offer[1]}</h2>
                                    <p class="offer-dates">${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''}</p>
                                    <p class="offer-description">${offer[2]}</p>
                                    </div>
                                    `;
                                }).join('');
                                offersContainer.style.display = 'block';
                                offersButton.querySelector('.arrow').textContent = '‚ñ≤';
                                } else {
                                offersContainer.style.display = 'none';
                                offersButton.querySelector('.arrow').textContent = '‚ñº'
                            }
                            
                            
                            
                            
                        });
                        
                        
                        
                        
                        
                        const totalItemsDiv = document.getElementById('total-items-found');
                        
                        if (searchQuery.length === 0) {
                            totalItemsDiv.style.display = 'none'; // Hide when search box is empty
                            } else {
                            if (totalVisibleItems > 0) {
                                // Check if totalVisibleItems is 1 (singular) or more (plural)
                                totalItemsDiv.textContent = `${totalVisibleItems} ${totalVisibleItems === 1 ? 'item' : 'items'}`;
                                totalItemsDiv.style.color = '#00FF00'; // Green for visibility
                                } else {
                                if (filterButtons.style.display === 'none') {
                                    totalItemsDiv.textContent = 'No menu item found';
                                    } else {
                                    totalItemsDiv.textContent = 'No item';
                                }
                                
                                totalItemsDiv.style.color = '#ff4d4d'; // Red for visibility
                            }
                            totalItemsDiv.style.display = 'block'; // Show only when search is not empty
                        }
                        
                        
                    }
                    
                    // Add event listener to filter buttons
                    document.querySelectorAll('.filter-btn').forEach(button => {
                        button.addEventListener('click', () => {
                            // Remove active class from all buttons
                            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                            
                            // Add active class to the clicked button
                            button.classList.add('active');
                            
                            // Update the selected filter type
                            selectedFilter = button.getAttribute('data-filter');
                            
                            // Trigger filtering
                            const searchQuery = document.getElementById('searchInput').value.trim();
                            filterMenuItems(searchQuery);
                        });
                    });
                    
                    
                    // Function to reset headers and hide the second column when search is cleared
                    function resetHeaders() {
                        document.querySelectorAll('.category-header').forEach(header => {
                            header.style.fontSize = '7rem';  // Reset to collapsed size
                            header.querySelector('.right').style.display = 'none';  // Hide second column
                            header.classList.remove('visible-border'); 
                            
                        });
                        
                        document.querySelectorAll('.category-items').forEach(container => {
                            container.style.display = 'none';  // Collapse all categories
                            container.classList.remove('visible-border'); 
                            
                        });
                    }
                    
                    // Get references to the elements
                    const searchInput = document.getElementById('searchInput');
                    const clearButton = document.getElementById('clearButton');
                    // The magnifierIcon remains always visible, so no toggling is required here
                    
                    searchInput.addEventListener('input', (e) => {
                        const searchQuery = e.target.value.trim();
                        
                        // Show the clear button if there is any input text; otherwise, hide it.
                        if (searchQuery.length > 0) {
                            clearButton.style.display = 'block';
                            } else {
                            clearButton.style.display = 'none';
                            resetHeaders();  // Reset headers when search is cleared
                        }
                        
                        // Validate the input to allow only English or Gurmukhi characters
                        const regex = /^[a-zA-Z0-9\u0A00-\u0A7F]*$/;
                        if (!regex.test(searchQuery)) {
                            e.target.value = searchQuery.slice(0, -1);
                            } else {
                            filterMenuItems(searchQuery);  // Filter items based on search query
                        }
                        
                        // Trigger a reflow for the clear button if necessary
                        clearButton.offsetHeight;
                    });
                    
                    
                    // Clear Button Event Listener
                    clearButton.addEventListener('click', () => {
                        searchInput.value = '';              // Clear input field
                        clearButton.style.display = 'none';  // Hide the clear button
                        
                        // Reset filtering and collapse categories (your existing logic)
                        filterMenuItems('');
                        
                        // Collapse all category items (your existing logic)
                        document.querySelectorAll('.category-items').forEach(container => {
                            container.style.display = 'none';
                        });
                        document.querySelectorAll('.category-header').forEach(header => {
                            header.classList.remove('expanded');
                        });
                        
                        // Focus back on the search box
                        searchInput.focus();
                        resetHeaders();
                    });
                    
                    
                    
                    const scriptUrl = "https://script.google.com/macros/s/AKfycbwqXrC-1gFM8eRJrKqOjAzV4hVev4TwaoE8Jj8FDO1ZBnegI9aT_UjrOAvNX6NskN5AEw/exec";
                    
                    // Fetch data from Google Script URL
                    fetch(scriptUrl)
                    .then(response => response.json())
                    .then(data => {
                        const menuDiv = document.getElementById('menu');
                        let currentCategory = null;
                        
                        // Store all category item containers for collapsing
                        const categoryItemsContainers = [];
                        
                        console.log("Fetched data:", data); // Debugging data fetching
                        
                        data.forEach(row => {
                            const mergedColAB = row.columnB.trim() !== "" ? row.columnA + " (" + row.columnB + ")" : row.columnA;
                            
                            // Apply different colors to column C, D, and E and join them with " / "
                            // Original code where you create colCDEElement:
                            const mergedcolCDE = [
                            row.columnC ? `<span style="color: #40E0D0;" data-column="C">${row.columnC}</span>` : '',
                            row.columnD ? `<span style="color: #00FF7F;" data-column="D">${row.columnD}</span>` : '',
                            //                            row.columnE ? `<span style="color: #E6E6FA;" data-column="E">${row.columnE}</span>` : ''
                            row.columnE ? `<span style="color: #F8BBD0;" data-column="E">${row.columnE}</span>` : ''
                            
                            ].filter(col => col).join(' / ');
                            
                            const colCDEElement = document.createElement('span');
                            colCDEElement.classList.add('colCDE');
                            colCDEElement.innerHTML = mergedcolCDE;  // This now contains data-column attributes
                            
                            console.log("Merged colCDE:", mergedcolCDE); // Debugging merged colCDE
                            
                            // Check if columnC is empty or is a category header
                            const isCategory = (String(row.columnC).trim() === "" || (isNaN(String(row.columnC)) && String(row.columnC).trim() !== "-"));
                            
                            console.log("Is category?", isCategory); // Debugging category check
                            
                            if (isCategory) {
                                const categoryHeaderDiv = document.createElement('div');
                                categoryHeaderDiv.classList.add('category-header');
                                
                                // MODIFIED: Store individual column values as data attributes
                                categoryHeaderDiv.dataset.columnC = row.columnC || '';
                                categoryHeaderDiv.dataset.columnD = row.columnD || '';
                                categoryHeaderDiv.dataset.columnE = row.columnE || '';
                                
                                const leftPart = document.createElement('span');
                                leftPart.classList.add('left');
                                leftPart.textContent = mergedColAB;
                                
                                const rightPart = document.createElement('span');
                                rightPart.classList.add('right');
                                rightPart.innerHTML = mergedcolCDE;  // Use innerHTML to render the colored spans
                                
                                categoryHeaderDiv.appendChild(leftPart);
                                categoryHeaderDiv.appendChild(rightPart);
                                
                                const categoryItemsDiv = document.createElement('div');
                                categoryItemsDiv.classList.add('category-items');
                                
                                // Toggle category items visibility on click
                                categoryHeaderDiv.addEventListener('click', () => {
                                    // Reset all other headers to default collapsed size and show only the first column
                                    document.querySelectorAll('.category-header').forEach(header => {
                                        header.style.fontSize = '7rem'; // Set collapsed size
                                        header.querySelector('.right').style.display = 'none'; // Ensure second column is hidden
                                        header.classList.remove('visible-border'); // Add this line
                                    });
                                    
                                    document.querySelectorAll('.category-items').forEach(container => {
                                        if (container !== categoryItemsDiv) {
                                            container.style.display = 'none';
                                            container.classList.remove('visible-border'); // Add this line
                                        }
                                    });
                                    
                                    // Toggle visibility and adjust styles accordingly
                                    if (categoryItemsDiv.style.display === 'none' || categoryItemsDiv.style.display === '') {
                                        categoryItemsDiv.style.display = 'block';
                                        categoryHeaderDiv.style.fontSize = '6rem';
                                        categoryHeaderDiv.querySelector('.right').style.display = 'inline'; // Show right column
                                        categoryHeaderDiv.classList.add('visible-border');
                                        categoryItemsDiv.classList.add('visible-border');
                                        } else {
                                        categoryItemsDiv.style.display = 'none';
                                        categoryHeaderDiv.classList.remove('visible-border');
                                        categoryItemsDiv.classList.remove('visible-border');
                                    }
                                });
                                
                                // Initial state: Increase font size for collapsed categories and hide second column
                                categoryHeaderDiv.style.fontSize = '7rem';
                                categoryHeaderDiv.querySelector('.right').style.display = 'none';
                                
                                menuDiv.appendChild(categoryHeaderDiv);
                                menuDiv.appendChild(categoryItemsDiv);
                                
                                categoryItemsContainers.push(categoryItemsDiv);                    
                                currentCategory = categoryItemsDiv;
                                } else if (currentCategory) {
                                const menuItemDiv = document.createElement('div');
                                menuItemDiv.classList.add('menu-item');
                                menuItemDiv.style.marginBottom = '0';
                                
                                const lineDiv = document.createElement('div');
                                lineDiv.classList.add('menu-item-line');
                                
                                const colABElement = document.createElement('span');
                                colABElement.classList.add('colAB');
                                colABElement.textContent = mergedColAB;
                                
                                const colCDEElement = document.createElement('span');
                                colCDEElement.classList.add('colCDE');
                                colCDEElement.innerHTML = mergedcolCDE;  // Use innerHTML to render the colored spans
                                
                                lineDiv.appendChild(colABElement);
                                lineDiv.appendChild(colCDEElement);                        
                                menuItemDiv.appendChild(lineDiv);
                                currentCategory.appendChild(menuItemDiv);
                            }
                        });
                        
                        categoryItemsContainers.forEach(container => {
                            container.style.display = 'none';
                        });
                        
                        document.querySelector(".search-container").style.display = "block";
                        
                        document.querySelector('.footer').style.display = 'block'; // Show footer
                        
                        
                        
                        
                        // Remove the loading overlay after the data is fetched and processed
                        document.getElementById('loadingOverlay').style.display = 'none';
                    })
                    .catch(error => {
                        console.error("Error fetching data:", error);
                        document.getElementById('loadingOverlay').innerHTML = "<div class='loading-message'>Error loading menu</div>";
                    });
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    let sidebar = document.getElementById('sidebar');
                    let indicator = document.createElement('div');
                    indicator.id = 'sidebar-indicator';
                    document.body.appendChild(indicator);
                    
                    let hoverTimeout;
                    let touchStartX = 0, touchEndX = 0, touchStartY = 0;
                    const swipeThreshold = 80;  // Minimum swipe distance
                    const edgeThreshold = 50;   // Touch must start near the edge
                    const sidebarTop = sidebar.offsetTop;
                    const sidebarBottom = sidebarTop + sidebar.offsetHeight;
                    
                    function disableScroll() {
                        document.body.style.overflow = 'hidden';
                    }
                    
                    function enableScroll() {
                        document.body.style.overflow = 'auto';
                    }
                    
                    // Mouse activation and deactivation
                    // Mouse and Touch activation for the sidebar
                    indicator.addEventListener('click', toggleSidebar);
                    indicator.addEventListener('touchstart', toggleSidebar, { passive: true });
                    
                    function toggleSidebar() {
                        sidebar.classList.toggle('open');
                        sidebar.classList.contains('open') ? disableScroll() : enableScroll();
                    }
                    
                    
                    
                    
                    // Deactivate on clicking outside sidebar
                    document.addEventListener('click', (event) => {
                        if (!sidebar.contains(event.target) && !indicator.contains(event.target)) {
                            sidebar.classList.remove('open');
                            enableScroll();
                        }
                    });
                    
                    
                    
                    // Toggle sidebar on indicator tap
                    indicator.addEventListener('touchstart', (event) => {
                        event.preventDefault();
                        sidebar.classList.toggle('open');
                        sidebar.classList.contains('open') ? disableScroll() : enableScroll();
                    });
                    
                    
                    
                    // Blink the touch indicator every 1 second
                    setInterval(() => {
                        indicator.style.opacity = (indicator.style.opacity === "1") ? "0.3" : "1";
                    }, 2500);
                    
                    const miscUrl = scriptUrl + "?sheet=misc&raw=true";    
                    
                    fetch(miscUrl)
                    .then(response => response.json())
                    .then(data => {
                        if (data && data.length >= 2) {
                            // Fetch delivery phone number from B3 cell
                            let deliveryPhone = data[3][1]; // Assuming B2 is in the 2nd row, 2nd column (0-indexed)
                            if (deliveryPhone) {
                                deliveryPhone = deliveryPhone.replace(/-/g, ""); // Remove dashes
                                const formattedDeliveryPhone = `tel:+91${deliveryPhone}`; // Add country code
                                
                                // Update the delivery phone link
                                const deliveryLinkElement = document.getElementById('delivery-link');
                                if (deliveryLinkElement) {
                                    deliveryLinkElement.href = formattedDeliveryPhone;
                                }
                            }
                            
                            // Fetch WhatsApp phone number from B4 cell (3rd row, 2nd column, 0-indexed)
                            let chatNumber = data[4][1];
                            if (chatNumber) {
                                chatNumber = chatNumber.replace(/-/g, ""); // Remove dashes
                            }
                            
                            // Fetch WhatsApp message from B5 cell (4th row, 2nd column, 0-indexed)
                            let message = data[5][1]; 
                            if (!message || message.trim() === "") {
                                message = "Hello Chai Sutta Bar!"; // Default message
                            }
                            
                            // URL-encode the message for the WhatsApp link
                            const encodedMessage = encodeURIComponent(message);
                            
                            // Construct the full WhatsApp link dynamically
                            const whatsappLink = `https://wa.me/+91${chatNumber}?text=${encodedMessage}`;
                            
                            // Update the href attribute of the anchor tag with the new link
                            const whatsappLinkElement = document.getElementById('whatsapp-link');
                            if (whatsappLinkElement) {
                                whatsappLinkElement.href = whatsappLink;
                            }
                            
                            // Fetch phone number from B6 cell (5th row, 2nd column, 0-indexed)
                            let contactPhone = data[6][1]; 
                            if (contactPhone) {
                                contactPhone = contactPhone.replace(/-/g, ""); // Remove dashes
                                const formattedContactPhone = `tel:+91${contactPhone}`; // Add country code
                                
                                // Update the phone link dynamically
                                const phoneLinkElement = document.getElementById("phone-link");
                                if (phoneLinkElement) {
                                    phoneLinkElement.href = formattedContactPhone;
                                }
                            }
                            
                            // Fetch WhatsApp offer number from B8 cell
                            let offerWhatsappNumber = data[7][1]; // B8 is 8th row (index 7), 2nd column (index 1)
                            if (offerWhatsappNumber) {
                                offerWhatsappNumber = offerWhatsappNumber.replace(/-/g, ""); // Remove dashes
                                whatsappOfferNumber = '+91' + offerWhatsappNumber; // Add country code
                            }
                            
                            
                            
                            
                            
                            
                            // Extract Open and Close times from Google Sheets
                            const openTimeStr = data[0][1]; // Example: "09.30am"
                            const closeTimeStr = data[1][1]; // Example: "10.45pm"
                            
                            // Get current date
                            const now = new Date();
                            const currentDate = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Get today's date without time
                            
                            // Convert the date in data[2][0] to a Date object (assuming it's already in dd/mm/yy format and can be parsed directly)
                            const dataDate = new Date(data[2][0]); // This assumes the date is in a format that JavaScript can parse directly (e.g., mm/dd/yyyy or yyyy/mm/dd)
                            
                            // Check if data[2][0] is today's date and data[2][1] is not empty
                            if (dataDate.getTime() === currentDate.getTime() && data[2][1] !== "") {
                                // If the date is today and data[2][1] is not empty, set statusMessage to data[2][1]
                                statusMessage = `<span style="color: #FFA500;">${data[2][1]}</span>`;
                                } else {
                                // Check if either openTimeStr or closeTimeStr is empty
                                if (!openTimeStr || !closeTimeStr) {
                                    // If one or both times are missing, don't display anything
                                    const timeElem = document.querySelector('.open-close');
                                    if (timeElem) {
                                        timeElem.innerHTML = "";
                                    }
                                    return; // Exit the function
                                }
                                
                                // Add validation for time format
                                if (!/^\d{1,2}\.\d{2}(am|pm)$/i.test(openTimeStr) || !/^\d{1,2}\.\d{2}(am|pm)$/i.test(closeTimeStr)) {
                                    console.error('Invalid time format detected');
                                    return;
                                }
                                
                                // Convert Open and Close times to Date objects
                                const openTime = parseCustomTime(openTimeStr);
                                const closeTime = parseCustomTime(closeTimeStr);
                                
                                // Get current time
                                const currentTime = now.getHours() * 60 + now.getMinutes(); // Convert current time to minutes since midnight
                                
                                // Convert Open and Close times to minutes since midnight
                                const openTimeInMinutes = openTime.getHours() * 60 + openTime.getMinutes();
                                const closeTimeInMinutes = closeTime.getHours() * 60 + closeTime.getMinutes();
                                
                                // Compare times based on minutes from midnight
                                if (currentTime >= openTimeInMinutes && currentTime < closeTimeInMinutes) {
                                    const timeLeft = closeTimeInMinutes - currentTime;
                                    const blinkClass = timeLeft <= 30 ? 'blink' : '';
                                    statusMessage = `<span style="color: #00FF00; font-weight: bold;">Open</span> <span class="${blinkClass}">until ${formatTime(closeTime)}</span>`;
                                    } else {
                                    let timeUntilOpen = openTimeInMinutes - currentTime;
                                    
                                    // Check if the opening time is on the next day
                                    if (timeUntilOpen < 0) {
                                        // Calculate the time difference until the next day's opening
                                        const minutesInDay = 24 * 60;
                                        timeUntilOpen = minutesInDay + timeUntilOpen; // Add a full day's worth of minutes
                                    }
                                    
                                    
                                    const blinkClass = timeUntilOpen <= 30 ? 'blink' : '';
                                    statusMessage = `<span style="color: #FFA500;">Closed</span> ‚ãÖ <span class="${blinkClass}">Opens ${formatTime(openTime)}</span>`;
                                }
                            }
                            
                            
                            // Update the display
                            const timeElem = document.querySelector('.open-close');
                            if (timeElem) {
                                timeElem.innerHTML = statusMessage;
                            }
                            
                        }                
                    })
                    .catch(error => {
                        console.error("Error fetching Misc data:", error);
                    });
                    
                    // Function to parse custom time format (hh.mmap)
                    function parseCustomTime(timeStr) {
                        // Extract hour, minute, and period using regex
                        const match = timeStr.match(/(\d{1,2})\.(\d{2})(am|pm)/i);
                        if (!match) {
                            console.error('Invalid time format:', timeStr);
                            return new Date(); // Handle error appropriately
                        }
                        
                        let hour = parseInt(match[1], 10);
                        const minute = parseInt(match[2], 10);
                        const period = match[3].toLowerCase();
                        
                        // Convert to 24-hour format
                        if (period === 'pm' && hour !== 12) {
                            hour += 12;
                            } else if (period === 'am' && hour === 12) {
                            hour = 0;
                        }
                        
                        return new Date(0, 0, 0, hour, minute);
                    }
                    
                    // Function to format time in hh:mm am/pm format
                    function formatTime(date) {
                        const hours = date.getHours();
                        const minutes = date.getMinutes();
                        const period = hours >= 12 ? "pm" : "am";
                        const formattedHours = hours % 12 || 12;  // Convert to 12-hour format
                        const formattedMinutes = minutes < 10 ? "0" + minutes : minutes;
                        return `${formattedHours}:${formattedMinutes} ${period}`;
                    }
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    function setupHamburgerMenu() {
                        // Create Hamburger Button
                        const hamburgerButton = document.createElement('div');
                        hamburgerButton.id = 'hamburger-button';
                        hamburgerButton.innerHTML = `
                        <div class="hamburger-lines">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        </div>
                        `;
                        
                        // Create hsidebar container
                        const hsidebarContainer = document.createElement('div');
                        hsidebarContainer.className = 'hsidebar-container';
                        
                        // Append it to the header
                        document.querySelector('.header').appendChild(hamburgerButton);
                        
                        // Create Sidebar (fixed missing close button and footer)
                        const hsidebar = document.createElement('div');
                        hsidebar.id = 'hsidebar';
                        hsidebar.innerHTML = `
                        <div class="hsidebar-content">
                        
                        <div id="close-sidebar" class="close-btn">&times;</div>
                        
                        <div class="hsidebar-option" id="likeContainer">
                        <div style="display: flex; align-items: center; gap: 3rem;">
                        <img src="icons/like.svg" alt="Like Icon" class="menu-icon invert-icon" id="likeIcon">
                        <span id="likeCounter"></span>
                        </div>
                        <div id="feedback"></div>
                        </div>
                        
                        
                        
                        <div class="hsidebar-option" id="install-app">
                        <img src="icons/install.svg" alt="Install Icon" class="menu-icon invert-icon">
                        Install CSB App
                        </div>
                        <div class="hsidebar-option" id="share-app-link">
                        <img src="icons/share.svg" alt="Share Icon" class="menu-icon green-icon">
                        Share App Link
                        </div>
                        <div class="hsidebar-option" id="show-qrcode">
                        <img src="icons/qr-code.svg" alt="Install Icon" class="menu-icon green-icon">
                        App QR Code
                        </div>
                        <div class="hsidebar-option" id="device-screen-info">
                        <img src="icons/display.svg" alt="Install Icon" class="menu-icon invert-icon">
                        Screen Info
                        </div>
                        
                        <div class="footer-text" id="footer-info">
                        <div class="footer-content">
                        <img src="icon-192.png" alt="CSB Logo" class="footer-logo">
                        <div>
                        <strong>Chai Sutta Bar</strong><br>Version 1.20.3 x64
                        </div>
                        </div>
                        </div>
                        
                        </div>`;
                        
                        hsidebarContainer.appendChild(hsidebar);
                        document.body.appendChild(hsidebarContainer);
                        
                        // pwa
                        if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
                            const installOption = document.getElementById('install-app');
                            installOption.classList.add('disabled-option');
                            installOption.onclick = null;  // Remove click handler
                        }
                        
                        
                        
                        // Create Backdrop
                        const overlay = document.createElement('div');
                        overlay.id = 'sidebar-overlay';
                        document.body.appendChild(overlay);
                        
                        // Create QR Code Modal
                        const qrCodeModal = document.createElement('div');
                        qrCodeModal.id = 'qr-code-modal';
                        qrCodeModal.innerHTML = `
                        <div class="modal-content">
                        <span id="close-modal">&times;</span>
                        <img src="qrcode.png" alt="QR Code">
                        </div>
                        `;
                        document.body.appendChild(qrCodeModal);
                        
                        // Add Share functionality
                        document.getElementById('share-app-link').addEventListener('click', () => {
                            const appLink = "https://shabadshala.github.io/Chai-Sutta-Bar/";
                            if (navigator.share) {
                                navigator.share({
                                    title: 'Chai Sutta Bar',
                                    url: appLink
                                }).catch(console.error);
                                } else {
                                navigator.clipboard.writeText(appLink).then(() => {
                                    showFeedback('Link copied');
                                });
                            }
                        });
                        
                        // Open Sidebar
                        hamburgerButton.addEventListener('click', () => {
                            hsidebar.classList.add('open');
                            overlay.style.display = 'block';
                            document.body.style.overflow = 'hidden'; // Lock scrolling on body
                            document.documentElement.style.overflow = 'hidden'; // Lock scrolling on html
                            document.body.style.height = '100%'; // Prevent body from resizing while locked
                            document.documentElement.style.height = '100%'; // Prevent html from resizing
                        });
                        
                        // Close Sidebar when clicking outside
                        overlay.addEventListener('click', () => {
                            hsidebar.classList.remove('open');
                            overlay.style.display = 'none';
                            document.body.style.overflow = ''; // Unlock scrolling on body
                            document.documentElement.style.overflow = ''; // Unlock scrolling on html
                            document.body.style.height = ''; // Allow body resizing again
                            document.documentElement.style.height = ''; // Allow html resizing
                        });
                        
                        // Close Sidebar on Escape Key
                        document.addEventListener('keydown', (e) => {
                            if (e.key === "Escape") {
                                hsidebar.classList.remove('open');
                                overlay.style.display = 'none';
                                document.body.style.overflow = '';
                                document.documentElement.style.overflow = ''; // Unlock scrolling on html
                                document.body.style.height = ''; // Allow body resizing again
                                document.documentElement.style.height = ''; // Allow html resizing
                            }
                        });
                        
                        // Close Sidebar when clicking on the cross button
                        document.getElementById('close-sidebar').addEventListener('click', () => {
                            hsidebar.classList.remove('open');
                            overlay.style.display = 'none';
                            document.body.style.overflow = ''; // Unlock scrolling
                            document.documentElement.style.overflow = ''; // Unlock scrolling
                            document.body.style.height = ''; // Allow body resizing
                            document.documentElement.style.height = ''; // Allow html resizing
                        });
                        
                        // Install App
                        document.getElementById('install-app').addEventListener('click', () => {
                            if (deferredPrompt) {
                                deferredPrompt.prompt();
                                deferredPrompt.userChoice.then((choiceResult) => {
                                    console.log(choiceResult.outcome === 'accepted' ? 'User accepted' : 'User dismissed');
                                    deferredPrompt = null;
                                });
                            }
                        });
                        
                        // Fixed QR Code handler
                        document.getElementById('show-qrcode').addEventListener('click', () => {
                            hsidebar.classList.remove('open');
                            overlay.style.display = 'none';
                            const qrCodeModal = document.getElementById('qr-code-modal');
                            qrCodeModal.style.display = 'block';
                        });
                        
                        // Close QR Code Modal
                        document.getElementById('close-modal').addEventListener('click', () => {
                            qrCodeModal.style.display = 'none';
                        });
                        
                        // Close QR Code Modal on Click Outside
                        window.addEventListener('click', (event) => {
                            if (event.target === qrCodeModal) {
                                qrCodeModal.style.display = 'none';
                            }
                        });
                        
                        
                        // Show Device Screen Info
                        document.getElementById('device-screen-info').addEventListener('click', function() {
                            showDeviceInfoModal();
                        });
                        
                        
                        // Swipe Left to Close Sidebar (Mobile Gesture)
                        let startX;
                        let startY;
                        
                        hsidebar.addEventListener('touchstart', (e) => {
                            const touchStart = e.touches[0];
                            startX = touchStart.clientX;
                            startY = touchStart.clientY;
                        });
                        
                        hsidebar.addEventListener('touchend', (e) => {
                            const touchEnd = e.changedTouches[0];
                            const deltaX = touchEnd.clientX - startX;
                            const deltaY = touchEnd.clientY - startY;
                            
                            if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < -50) {
                                hsidebar.classList.remove('open');
                                overlay.style.display = 'none';
                                document.body.style.overflow = '';
                                document.documentElement.style.overflow = '';
                                document.body.style.height = '';
                                document.documentElement.style.height = '';
                            }
                        });
                    }
                    
                    // Call the setup function
                    setupHamburgerMenu();
                    
                    
                    
                    
                    
                    
                    
                    
                    function showDeviceInfoModal() {
                        // Hide the sidebar when showing the modal
                        const hsidebar = document.getElementById('hsidebar');
                        const overlay = document.getElementById('sidebar-overlay');
                        hsidebar.classList.remove('open');
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'hidden';
                        document.documentElement.style.overflow = 'hidden';
                        
                        document.body.style.height = ''; 
                        document.documentElement.style.height = '';
                        
                        // Gather device info
                        const screenWidth = window.screen.width;
                        const screenHeight = window.screen.height;
                        const innerWidth = window.innerWidth;
                        const innerHeight = window.innerHeight;
                        const pixelRatio = window.devicePixelRatio;
                        const userAgent = navigator.userAgent;
                        const isTouchDevice = 'ontouchstart' in window ? "Touch device" : "Non-touch device";
                        const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                        const deviceType = (innerWidth <= 767) ? "Mobile or Tablet" : "Desktop";
                        
                        // Create modal content with updated font size and styles
                        const modalContent = `
                        <div style="padding: 20px; font-family: Arial, sans-serif; background-color: #fff; color: #333; border-radius: 8px; width: 80%; max-width: 500px; font-size: 13px; position: relative; text-align: center;">
                        <h3 style="font-size: 20px; font-weight: bold; margin-bottom: 20px;">Screen Info</h3>
                        <p style="line-height: 1.5;"><strong>Screen Resolution:</strong> ${screenWidth} x ${screenHeight}</p>
                        <p style="line-height: 1.5;"><strong>Viewport Size:</strong> ${innerWidth} x ${innerHeight}</p>
                        <p style="line-height: 1.5;"><strong>Device Pixel Ratio:</strong> ${pixelRatio}</p>
                        <p style="line-height: 1.5;"><strong>Effective DPI/PPI:</strong> ${96 * pixelRatio} dpi</p>
                        <p style="line-height: 1.5;"><strong>Device Type:</strong> ${deviceType}</p>
                        <p style="line-height: 1.5;"><strong>Touch Events Support:</strong> ${isTouchDevice}</p>
                        <p style="line-height: 1.5;"><strong>User Agent:</strong> ${userAgent}</p>
                        <p style="line-height: 1.5;"><strong>Time Zone:</strong> ${timeZone}</p>
                        <button id="copy-button" style="margin-top: 20px; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Copy Text</button>
                        <button id="close-modal" style="position: absolute; top: 10px; right: 10px; padding: 5px 10px; background-color: transparent; color: #333; border: 1px solid #333; border-radius: 50%; font-size: 18px; cursor: pointer;">&times;</button>
                        </div>
                        `;
                        
                        // Create modal container
                        const modalContainer = document.createElement('div');
                        modalContainer.style.position = 'fixed';
                        modalContainer.style.top = '0';
                        modalContainer.style.left = '0';
                        modalContainer.style.width = '100%';
                        modalContainer.style.height = '100%';
                        modalContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
                        modalContainer.style.display = 'flex';
                        modalContainer.style.justifyContent = 'center';
                        modalContainer.style.alignItems = 'center';
                        modalContainer.style.zIndex = '1000';
                        modalContainer.innerHTML = modalContent;
                        
                        // Append modal to body
                        document.body.appendChild(modalContainer);
                        
                        // Add event listener for the close button
                        const closeModalButton = modalContainer.querySelector('#close-modal');
                        closeModalButton.addEventListener('click', function() {
                            document.body.removeChild(modalContainer);
                            document.body.style.overflow = ''; 
                            document.documentElement.style.overflow = ''; 
                            
                            
                        });
                        
                        // Add event listener for the copy button
                        const copyButton = modalContainer.querySelector('#copy-button');
                        copyButton.addEventListener('click', function() {
                            // Get all text content from h3 and p elements
                            const contentDiv = modalContainer.querySelector('div');
                            const elements = contentDiv.querySelectorAll('h3, p');
                            let text = Array.from(elements).map(el => el.textContent).join('\n');
                            
                            // Copy to clipboard
                            navigator.clipboard.writeText(text).then(() => {
                                // Create feedback element
                                const feedback = document.createElement('div');
                                feedback.textContent = 'Text copied';
                                feedback.style.position = 'fixed';
                                feedback.style.bottom = '20px';
                                feedback.style.left = '50%';
                                feedback.style.transform = 'translateX(-50%)';
                                feedback.style.background = '#333';
                                feedback.style.fontSize = '4rem';  // üëà Adjust this value (e.g., 14px, 16px, 18px)
                                feedback.style.color = '#fff';
                                feedback.style.padding = '8px 16px';
                                feedback.style.borderRadius = '4px';
                                feedback.style.zIndex = '2000';
                                document.body.appendChild(feedback);
                                
                                // Remove feedback after 2 seconds
                                setTimeout(() => {
                                    if (document.body.contains(feedback)) {
                                        document.body.removeChild(feedback);
                                    }
                                }, 2000);
                                }).catch(err => {
                                console.error('Failed to copy:', err);
                            });
                        });
                        
                        // Close modal when clicking outside
                        modalContainer.addEventListener('click', function(event) {
                            if (event.target === modalContainer) {
                                document.body.removeChild(modalContainer);
                                document.body.style.overflow = ''; 
                                document.documentElement.style.overflow = ''; 
                                
                            }
                        });
                        
                        // Close modal on Escape key
                        window.addEventListener('keydown', function(event) {
                            if (event.key === 'Escape') {
                                document.body.removeChild(modalContainer);
                                document.body.style.overflow = ''; 
                                document.documentElement.style.overflow = ''; 
                                
                            }
                        });
                        
                        // Close modal on back button
                        window.addEventListener('popstate', function() {
                            document.body.removeChild(modalContainer);
                            document.body.style.overflow = ''; 
                            document.documentElement.style.overflow = ''; 
                            
                        });
                    }
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    let deferredPrompt; // Variable to hold the deferred prompt event
                    
                    // Listen for the beforeinstallprompt event
                    window.addEventListener("beforeinstallprompt", (e) => {
                        e.preventDefault(); // Prevent the default prompt from showing automatically
                        deferredPrompt = e; // Store the event so we can trigger it later
                        
                        // Optionally, show a custom install button here if needed
                        // document.getElementById('install-button').style.display = 'block'; 
                        
                        // Automatically trigger the prompt after a delay
                        setTimeout(() => {
                            deferredPrompt.prompt(); // Show the install prompt
                            deferredPrompt.userChoice.then((choiceResult) => {
                                // Handle the user's response
                                if (choiceResult.outcome === "accepted") {
                                    console.log("User accepted the install prompt");
                                    } else {
                                    console.log("User dismissed the install prompt");
                                }
                                deferredPrompt = null; // Reset the deferred prompt
                            });
                        }, 3000); // Adjust delay as needed (e.g., 3 seconds)
                    });
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    let scrapItems = [];
                    let scrapVisible = false;                                                        
                    // Add these JavaScript modifications
                    let isScrapListPinned = false;                                        
                    // Add variable to track warning visibility
                    let isWarningVisible = false;
                    
                    // Scrap Button Functionality
                    document.getElementById('scrapButton').addEventListener('click', function(e) {
                        // Prevent event from bubbling up to document listener
                        e.stopPropagation();
                        toggleScrapList();
                    });
                    
                    function updateScrapButtonStatus() {
                        const scrapButton = document.getElementById('scrapButton');
                        scrapButton.classList.toggle('has-items', scrapItems.length > 0);
                        
                        
                        const scrapButtonImg = document.querySelector('#scrapButton img');
                        if (isScrapListPinned) {
                            scrapButton.classList.remove('invert-icon');
                            scrapButtonImg.classList.add('dimmed');    
                            scrapButton.classList.add('anti-hover');
                            } else {
                            scrapButton.classList.add('invert-icon');                            
                            scrapButtonImg.classList.remove('dimmed');                            
                            scrapButton.classList.remove('anti-hover');
                        }
                        
                        
                        // Optional: Add subtle pulse animation when items are added
                        if (scrapItems.length > 0) {
                            scrapButton.style.animation = 'pulse-green 1s ease';
                            setTimeout(() => scrapButton.style.animation = '', 1000);
                        }
                    }
                    
                    function handleScrapItemsChange() {
                        updateScrapListDisplay();
                        updateScrapButtonStatus(); // Add this line
                        updateScrapCounter(); // Add this line
                        
                    }
                    
                    // Close scrap list when clicking outside
                    document.addEventListener('click', (e) => {
                        const scrapList = document.getElementById('scrapList');
                        const scrapButton = document.getElementById('scrapButton');
                        
                        // Check if click is outside both scrap list and scrap button
                        if (scrapVisible && 
                        !scrapList.contains(e.target) && 
                        !scrapButton.contains(e.target)) {
                            if (!isScrapListPinned) {
                                closeScrapList();
                            }
                        }
                    });
                    
                    // Close scrap list when clicking close button
                    document.getElementById('closeScrap').addEventListener('click', closeScrapList);
                    
                    document.getElementById('clearScrap').addEventListener('click', () => {
                        if (!scrapList) return; // Safety check    
                        
                        isScrapListPinned = false; // Unlock the scrap list
                        
                        // Add wash-out animation class
                        scrapList.classList.add('wash-out-animation');
                        
                        // Wait for animation to complete before clearing
                        setTimeout(() => {
                            scrapItems = []; // Clear the list after animation
                            updateScrapListDisplay(); // Refresh UI
                            showFeedback("Order list cleared"); // Show feedback message
                            closeScrapList(); // Close the scrap list
                            
                            // Reset for future use
                            scrapList.classList.remove('wash-out-animation');
                        }, 800); // Match CSS animation duration
                        scrapItems = [];
                        handleScrapItemsChange();
                    });                    
                    
                    // Add items to scrap list when clicking rates
                    document.getElementById('menu').addEventListener('click', (e) => {
                        
                        const rateElement = e.target.closest('.colCDE span, .colCDE');
                        if (rateElement && rateElement.textContent.match(/‚Çπ?\d+/)) {
                            const menuItemLine = rateElement.closest('.menu-item-line');
                            
                            // Get which column was clicked (C/D/E)
                            const column = rateElement.getAttribute('data-column');
                            
                            // Get category header
                            const categoryHeader = menuItemLine.closest('.menu-item')
                            .closest('.category-items')
                            .previousElementSibling;
                            
                            // Get the specific column value from category header
                            const columnValue = categoryHeader.dataset[`column${column}`]?.trim();
                            
                            // Build category name (without column value)
                            const categoryName = categoryHeader.querySelector('.left').textContent.split('(')[0].trim();
                            
                            // Build item name
                            let itemName = menuItemLine.querySelector('.colAB').textContent.split('(')[0].trim();
                            
                            // Add column value to item name if it exists
                            if (columnValue) {
                                itemName += ` (${columnValue})`;
                            }
                            
                            // Combine names
                            const combinedName = `${categoryName} - ${itemName}`;
                            
                            // Rest of your existing click handling code...
                            const clickedRate = rateElement.textContent.replace('‚Çπ', '').trim();
                            
                            if (clickedRate.includes('/')) {
                                showTapFeedbackInCenter('‚ùå');
                                playBeep(600, 0.15);
                                } else {
                                animateRateMovement(rateElement);                                
                                scrapItems.push({ 
                                    name: combinedName, 
                                    rate: clickedRate 
                                });
                            }
                            
                            
                            updateScrapListDisplay();
                        }
                        handleScrapItemsChange();
                    });
                    
                    function animateRateMovement(sourceElement) {
                        const scrapButton = document.getElementById('scrapButton');                        
                        
                        // Get positions of the source element and the scrap button
                        const sourceRect = sourceElement.getBoundingClientRect();
                        const targetRect = scrapButton.getBoundingClientRect();                        
                        
                        // Create a floating clone of the rate element
                        const floatingClone = document.createElement('div');
                        floatingClone.textContent = sourceElement.textContent;
                        floatingClone.style.position = 'fixed';
                        floatingClone.style.left = `${sourceRect.left}px`;
                        floatingClone.style.top = `${sourceRect.top}px`;
                        floatingClone.style.fontSize = '16px';
                        floatingClone.style.fontWeight = 'bold';
                        floatingClone.style.background = '#ffcc00';
                        floatingClone.style.padding = '5px 10px';
                        floatingClone.style.borderRadius = '5px';
                        floatingClone.style.boxShadow = '0px 2px 5px rgba(0,0,0,0.2)';
                        floatingClone.style.transition = 'transform 0.5s ease-out, opacity 0.5s ease-out';
                        floatingClone.style.zIndex = '1000';
                        
                        document.body.appendChild(floatingClone);                        
                        
                        // Force repaint before moving
                        requestAnimationFrame(() => {
                            floatingClone.style.transform = `translate(${targetRect.left - sourceRect.left}px, ${targetRect.top - sourceRect.top}px) scale(0.5)`;
                            floatingClone.style.opacity = '0';
                        });                        
                        
                        // Remove the element after animation
                        setTimeout(() => {
                            floatingClone.remove();
                        }, 500);
                    }
                    
                    
                    
                    function showTapFeedbackInCenter(symbol) {
                        const feedbackElement = document.createElement('div');
                        feedbackElement.textContent = symbol;
                        feedbackElement.style.position = 'fixed';
                        
                        // Center horizontally and vertically
                        feedbackElement.style.left = `${window.innerWidth / 2}px`;
                        feedbackElement.style.top = `${window.innerHeight / 2}px`;
                        
                        feedbackElement.style.transform = 'translate(-50%, -50%) scale(0)'; // Center and start small
                        feedbackElement.style.fontSize = '6rem';
                        feedbackElement.style.fontWeight = 'bold';
                        feedbackElement.style.color = 'red';
                        feedbackElement.style.transition = 'transform 0.3s ease-out, opacity 0.5s ease-out';
                        feedbackElement.style.zIndex = '1000';
                        
                        document.body.appendChild(feedbackElement);
                        
                        // Trigger zoom-in effect
                        requestAnimationFrame(() => {
                            feedbackElement.style.transform = 'translate(-50%, -50%) scale(2)';
                        });
                        
                        // Remove feedback after animation
                        setTimeout(() => {
                            feedbackElement.remove();
                        }, 500);
                    }
                    
                    let audioCtx; // Declare outside to initialize later
                    let oscillator;
                    
                    document.addEventListener("click", () => {
                        if (!audioCtx) {
                            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                            } else if (audioCtx.state === "suspended") {
                            audioCtx.resume();
                        }
                    }, { once: true }); // Runs only once
                    
                    function playBeep(frequency, duration) {
                        if (!audioCtx) {
                            console.warn("AudioContext not initialized yet. User interaction required.");
                            return;
                        }
                        
                        if (audioCtx.state === "suspended") {
                            audioCtx.resume().then(() => {
                                generateBeep(frequency, duration);
                            });
                            } else {
                            generateBeep(frequency, duration);
                        }
                    }
                    
                    function generateBeep(frequency, duration) {
                        if (oscillator) {
                            oscillator.stop(); // Stop previous beep before starting a new one
                        }
                        
                        oscillator = audioCtx.createOscillator();
                        let gainNode = audioCtx.createGain();
                        
                        oscillator.type = "sine";
                        oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
                        gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioCtx.destination);
                        
                        oscillator.start();
                        setTimeout(() => {
                            oscillator.stop();
                        }, duration * 1000);
                    }
                    
                    
                    
                    
                    function updateScrapListDisplay() {
                        const scrapContainer = document.getElementById('scrapItems');
                        
                        // Step 1: Combine duplicate items and calculate quantities
                        const itemMap = new Map();
                        scrapItems.forEach((item) => {
                            const key = `${item.name}-${item.rate}`;
                            if (itemMap.has(key)) {
                                itemMap.get(key).qty++;
                                } else {
                                itemMap.set(key, { ...item, qty: 1 });
                            }
                        });
                        
                        // Step 2: Convert map values to array and sort alphabetically by item name
                        const sortedItems = Array.from(itemMap.values()).sort((a, b) => 
                        a.name.localeCompare(b.name)
                        );
                        
                        // Step 3: Generate HTML for sorted items with quantity stepper
                        scrapContainer.innerHTML = sortedItems.map((groupedItem) => `
                        <div class="scrap-item">
                        <div class="scrap-item-name"><strong>${groupedItem.name}</strong></div>
                        <div class="scrap-item-rate">
                        <div class="qty-stepper">
                        <button class="decrement-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">-</button>
                        <span class="qty-display">${groupedItem.qty}</span>
                        <button class="increment-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">+</button>
                        </div>
                        <span> ‚Çπ${groupedItem.rate}</span>
                        </div>
                        <span class="delete-btn" data-name="${groupedItem.name}" data-rate="${groupedItem.rate}">‚úï</span>
                        </div>
                        `).join('');
                        
                        // Step 4: Update total price
                        // Step 4: Calculate total quantity and total price
                        const totalQuantity = sortedItems.reduce((acc, item) => acc + item.qty, 0); // Total quantity
                        const totalPrice = sortedItems.reduce((acc, item) => acc + (parseFloat(item.rate) * item.qty), 0); // Total price
                        
                        // Step 5: Update the total price element to include total quantity
                        const totalPriceElement = document.getElementById('totalPrice');
                        totalPriceElement.textContent = `${totalQuantity} ${totalQuantity === 1 ? 'item' : 'items'} - Total: ‚Çπ${totalPrice.toFixed(0)}`;
                        
                        
                        // Step 5: Add event listeners for quantity controls
                        document.querySelectorAll('.increment-btn').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                e.stopPropagation();
                                const name = e.target.dataset.name;
                                const rate = e.target.dataset.rate;
                                scrapItems.push({ name, rate });
                                updateScrapListDisplay();
                                updateScrapCounter();
                            });
                        });
                        
                        document.querySelectorAll('.decrement-btn').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                e.stopPropagation();
                                const name = e.target.dataset.name;
                                const rate = e.target.dataset.rate;
                                const currentCount = scrapItems.filter(item =>
                                item.name === name && item.rate === rate
                                ).length;
                                
                                if (currentCount === 1) {
                                    // Remove all instances if quantity is 1
                                    scrapItems = scrapItems.filter(item =>
                                    item.name !== name || item.rate !== rate
                                    );
                                    } else {
                                    // Remove last instance of this item
                                    let lastIndex = -1;
                                    for (let i = scrapItems.length - 1; i >= 0; i--) {
                                        if (scrapItems[i].name === name && scrapItems[i].rate === rate) {
                                            lastIndex = i;
                                            break;
                                        }
                                    }
                                    if (lastIndex !== -1) scrapItems.splice(lastIndex, 1);
                                }
                                
                                updateScrapListDisplay();
                                updateScrapCounter();
                                updateDecrementButtonState(name, rate); // Update button state after changes
                            });
                            
                            // Initial button state setup (when the list first loads)
                            updateDecrementButtonState(btn.dataset.name, btn.dataset.rate);
                        });
                        
                        // Existing delete button handlers
                        document.querySelectorAll('.delete-btn').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                e.stopPropagation();
                                const name = e.target.dataset.name;
                                const rate = e.target.dataset.rate;
                                
                                // Remove the item from scrapItems
                                scrapItems = scrapItems.filter(item => item.name !== name || item.rate !== rate);
                                
                                // Check if scrapItems is empty
                                if (scrapItems.length === 0) {
                                    isScrapListPinned = false;
                                    closeScrapList();
                                    showFeedback("Order list cleared"); // Show feedback message
                                }
                                handleScrapItemsChange();
                                updateScrapListDisplay();
                            });
                        });
                    }
                    
                    function updateDecrementButtonState(name, rate) {
                        const currentCount = scrapItems.filter(item =>
                        item.name === name && item.rate === rate
                        ).length;
                        
                        const decrementButtons = document.querySelectorAll(`.decrement-btn[data-name="${name}"][data-rate="${rate}"]`);
                        
                        decrementButtons.forEach(btn => {
                            btn.disabled = currentCount <= 1;
                        });
                    }
                    
                    
                    function showOrderListWarning() {                            
                        let existingModal = document.getElementById('orderListWarningModal');
                        if (existingModal) {
                            existingModal.remove(); 
                            isWarningVisible = false;
                            return;
                        }
                        
                        let modal = document.createElement('div');
                        modal.id = 'orderListWarningModal';
                        modal.className = 'modal-overlay';
                        
                        let contentEnglish = `
                        <p><strong>Order list is empty.</strong></p>
                        <ul>
                        <li>Tap <b>rate</b> to add an item. In the order list, you can <b>increase, decrease or remove</b> items.</li>
                        </ul>
                        `;
                        
                        let contentPunjabi = `
                        <p><strong>‡®Ü‡®∞‡®°‡®∞ ‡®∏‡©Ç‡®ö‡©Ä ‡®ñ‡®æ‡®≤‡©Ä ‡®π‡©à‡•§</strong></p>
                        <ul>
                        <li>‡®ö‡©Ä‡©õ‡®æ‡®Ç ‡®™‡®æ‡®â‡®£ ‡®≤‡®à <b>‡®∞‡©á‡®ü</b> ‡®õ‡©Ç‡®π‡©ã‡•§ ‡®Ü‡®∞‡®°‡®∞ ‡®∏‡©Ç‡®ö‡©Ä ‡®µ‡®ø‡©±‡®ö‡©ã‡®Ç, ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®ö‡©Ä‡©õ‡®æ‡®Ç <b>‡®ò‡®ü‡®æ, ‡®µ‡®ß‡®æ ‡®ú‡®æ‡®Ç ‡®ï‡©±‡®¢</b> ‡®∏‡®ï‡®¶‡©á ‡®π‡©ã</li>
                        </ul>
                        `;
                        
                        modal.innerHTML = `
                        <div class="modal-content">
                        <span class="close-button">&times;</span>
                        <div id="modalText">${contentEnglish}</div>
                        <div id="toggleContainer" class="toggle-container">
                        <div id="toggleButton" class="split-toggle">
                        <div id="englishSide" class="toggle-half active">Eng</div>
                        <div id="punjabiSide" class="toggle-half">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
                        </div>
                        </div>
                        </div>
                        `;
                        
                        document.body.appendChild(modal);
                        
                        const toggleButton = document.getElementById('toggleButton');
                        const modalText = document.getElementById('modalText');
                        const englishSide = document.getElementById('englishSide');
                        const punjabiSide = document.getElementById('punjabiSide');
                        let isEnglish = true;
                        
                        toggleButton.addEventListener('click', () => {
                            isEnglish = !isEnglish;
                            if (isEnglish) {
                                modalText.innerHTML = contentEnglish;
                                englishSide.classList.add('active');
                                punjabiSide.classList.remove('active');
                                } else {
                                modalText.innerHTML = contentPunjabi;
                                punjabiSide.classList.add('active');
                                englishSide.classList.remove('active');
                            }
                        });
                        
                        function closeModal() {
                            modal.remove();
                            isWarningVisible = false;
                        }
                        
                        const autoCloseTimer = setTimeout(closeModal, 60000);
                        
                        modal.querySelector('.close-button').addEventListener('click', () => {
                            clearTimeout(autoCloseTimer);
                            closeModal();
                        });
                        
                        modal.addEventListener('click', (event) => {
                            if (event.target === modal) {
                                clearTimeout(autoCloseTimer);
                                closeModal();
                            }
                        });
                        
                        isWarningVisible = true;
                    }
                    
                    
                    
                    // Modified toggleScrapList function
                    function toggleScrapList() {                        
                        if (scrapItems.length === 0) {
                            const existingModal = document.getElementById('orderListWarningModal');
                            if (existingModal) {
                                // If modal exists, close it
                                existingModal.remove();
                                isWarningVisible = false;
                                } else {
                                // If modal doesn't exist, show it
                                showOrderListWarning();
                                isWarningVisible = true;
                            }
                            return;
                        }
                        
                        // Existing logic for non-empty scrap list
                        if (!scrapVisible) {
                            scrapVisible = true;
                            document.getElementById('scrapList').style.display = 'block';
                            } else if (!isScrapListPinned) {
                            closeScrapList();
                        }
                    }
                    
                    function closeScrapList() {
                        if (!isScrapListPinned) {
                            scrapVisible = false;
                            document.getElementById('scrapList').style.display = 'none';
                            resetPinStatus();
                        }
                    }
                    
                    // Function to trim the first non-English character from a string
                    function trimLeftNonEnglish(text) {
                        return text.replace(/^[^A-Za-z]+/, '');
                    }
                    
                    document.getElementById('orderScrap').addEventListener('click', async () => {
                        if (scrapItems.length === 0) {
                            showOrderListWarning();
                            return;
                        }                        
                        
                        const orderNumber = cachedOrderNumber + 1;
                        
                        // Group items by name and rate to calculate quantities
                        const itemMap = new Map();
                        scrapItems.forEach((item) => {
                            const key = `${item.name}-${item.rate}`;
                            itemMap.has(key) ? itemMap.get(key).qty++ : itemMap.set(key, { ...item, qty: 1 });
                        });
                        
                        const sortedItems = Array.from(itemMap.values()).sort((a, b) => a.name.localeCompare(b.name));
                        
                        // Generate order text with quantities and total per row
                        let orderText = sortedItems.map(item => {
                            let itemTotal = item.qty * parseFloat(item.rate); // Calculate total for each row
                            return item.qty > 1 
                            ? `*${item.qty}* x ${trimLeftNonEnglish(item.name)} @ ‚Çπ${item.rate} - ‚Çπ${itemTotal}`
                            : `*${item.qty}* x ${trimLeftNonEnglish(item.name)} - ‚Çπ${itemTotal}`;
                        }).join('\n');                        
                        
                        // Calculate total cost
                        let totalAmount = sortedItems.reduce((acc, item) => acc + (parseFloat(item.rate) * item.qty), 0);
                        
                        // Calculate total number of items
                        let totalItems = sortedItems.reduce((acc, item) => acc + item.qty, 0);
                        
                        // List of food-related emojis
                        let foodEmojis = ['üå∂', 'ü´ë', 'üåΩ', 'üçî', 'üçü', 'üçï', 'ü•ô', 'üåÆ', 'ü•ó', 'üçø', 'üçé', 'üçã', 'üçì', 'üçû', 'ü•ò', 'üç±', 'üçß', 'üçπ', 'üëë', '‚òòÔ∏è', 'üí•', 'üçí', 'üéÅ', 'üéâ', 'üéä', 'üíù'];
                        
                        // Select a random emoji
                        let randomEmoji = foodEmojis[Math.floor(Math.random() * foodEmojis.length)];
                        
                        let message = encodeURIComponent(
                        `${randomEmoji}\n*Order No. ${orderNumber}*\n${'-'.repeat(30)}\n` +
                        `${sortedItems.map(item => {
                        let itemTotal = item.qty * parseFloat(item.rate);
                        return item.qty > 1 
                        ? `*${item.qty}* x ${trimLeftNonEnglish(item.name)} @ ‚Çπ${item.rate} - ‚Çπ${itemTotal}`
                        : `*${item.qty}* x ${trimLeftNonEnglish(item.name)} - ‚Çπ${itemTotal}`;
                        }).join('\n\n')}\n${'-'.repeat(30)}\n` +
                        `*${totalItems}* ${totalItems > 1 ? "items" : "item"} - *‚Çπ${Math.round(totalAmount)}* only\n${'-'.repeat(30)}`
                        );
                        
                        
                        
                        
                        window.open(`https://wa.me/${whatsappOfferNumber}?text=${message}`, '_blank');
                        
                        
                        // Clear the scrap list after ordering
                        scrapItems = [];
                        updateScrapListDisplay();
                        handleScrapItemsChange();
                        closeScrapList();
                        showFeedback("Order sent. List cleared!"); // Optional feedback
                        
                        
                        updateCounter('updateOrders');
                        cachedOrderNumber = orderNumber;
                    });
                    
                    
                    function calculateTotal() {
                        return scrapItems.reduce((total, item) => {
                            return total + parseFloat(item.rate);
                        }, 0);
                    }
                    
                    function resetPinStatus() {
                        isScrapListPinned = false;
                        const pinButton = document.getElementById('pinScrap');
                        pinButton.textContent = 'üìå';
                        
                        const closeButton = document.getElementById('closeScrap');
                        closeButton.disabled = false;
                        closeButton.style.color = ''; 
                    }
                    
                    // Add pin button functionality
                    document.getElementById('pinScrap').addEventListener('click', function(e) {
                        e.stopPropagation();
                        isScrapListPinned = !isScrapListPinned;
                        this.textContent = isScrapListPinned ? 'üîí' : 'üìå';
                        showFeedback(isScrapListPinned ? "List pinned" : "List unpinned");
                        
                        
                        
                        
                        // Existing close button handling
                        const closeButton = document.getElementById('closeScrap');
                        closeButton.disabled = isScrapListPinned;
                        closeButton.style.color = isScrapListPinned ? 'gray' : '';
                        updateScrapButtonStatus();
                    });
                    
                    
                    
                    
                    
                    // Add this function to update the counter
                    function updateScrapCounter() {
                        const counter = document.querySelector('#scrapButton .counter-badge');
                        counter.textContent = scrapItems.length > 0 ? scrapItems.length : ''; 
                        counter.style.display = scrapItems.length > 0 ? 'inline-block' : 'none';
                        
                        
                        // Add animation when items are added
                        if(scrapItems.length > 0) {
                            counter.style.transform = 'scale(1.2)';
                            setTimeout(() => counter.style.transform = 'scale(1)', 200);
                        }
                    } 
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    // Function to send offer data via WhatsApp
                    function sendOffer(offerText) {
                        offerNsg = decodeURIComponent(offerText);
                        const whatsappUrl = `https://wa.me/${whatsappOfferNumber}?text=${offerText}`;
                        window.open(whatsappUrl, '_blank');
                    }
                    
                    
                    // Offers search
                    let offersData = [];
                    let offerNsg = '';
                    
                    // Offer Section
                    function formatDate(dateString) {
                        const date = new Date(dateString);
                        const day = date.getDate().toString().padStart(2, '0');
                        const month = date.toLocaleString('en-US', { month: 'short' });
                        const year = date.getFullYear().toString().slice(-2);
                        return `${day}-${month}-${year}`;
                    }
                    
                    // Offer elements
                    const offersButton = document.getElementById('offers-button');
                    const offersContainer = document.getElementById('offers-container');
                    
                    fetch(scriptUrl + "?sheet=offer")
                    .then(response => response.json())
                    .then(offerData => {
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        
                        // Filter valid offers
                        const validOffers = offerData.filter(offer => {
                            const startDate = new Date(offer[0]);
                            startDate.setHours(0, 0, 0, 0);
                            return startDate >= today;
                        });
                        
                        offersData = validOffers;
                        
                        if (validOffers.length > 0) {
                            offersButton.innerHTML = `${validOffers.length} Offer${validOffers.length > 1 ? 's' : ''} Available <span class="arrow">‚ñº</span>`;
                            offersButton.style.display = 'block';
                            
                            offersButton.addEventListener('click', () => {
                                const isVisible = offersContainer.style.display === 'block';
                                offersContainer.style.display = isVisible ? 'none' : 'block';
                                offersButton.querySelector('.arrow').textContent = isVisible ? '‚ñº' : '‚ñ≤';
                                
                            });
                        }
                        
                        offersContainer.innerHTML = validOffers.map(offer => {
                            
                            const offerText = `üéä\n*${offer[1]}*\n(${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''})\n${offer[2]}\n„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞Ô∏è„Ä∞`;
                            return `
                            <div class="offer-item" style="position: relative;">
                            <button class="send-whatsapp" onclick="sendOffer('${encodeURIComponent(offerText)}')" style="position: absolute; top: 2rem; right: 2rem; background: #28a745; color: white; border: none; padding: 1rem 2rem; border-radius: 2rem; font-weight: bold; cursor: pointer;">Order</button>
                            <h2 class="offer-title">${offer[1]}</h2>
                            <p class="offer-dates">${formatDate(offer[0])} ${offer[3] ? `to ${formatDate(offer[3])}` : ''}</p>
                            <p class="offer-description">${offer[2]}</p>
                            
                            </div>
                            `;
                        }).join('');
                    })
                    .catch(error => {
                        console.error('Error loading offers:', error);
                    });
                    
                    // Close offers when clicking outside
                    document.addEventListener('click', (e) => {
                        if (!offersContainer.contains(e.target) && !offersButton.contains(e.target)) {
                            offersContainer.style.display = 'none';
                            const arrow = offersButton.querySelector('.arrow');
                            if (arrow) arrow.textContent = '‚ñº';
                        }
                    });
                    
                    
                    
                    
                    
                    
                    async function updateViewCounter() {
                        try {
                            await fetch(`${scriptUrl}?sheet=counter&action=updateViews`);
                            } catch (error) {
                            console.error("Error updating view counter:", error);
                        }
                    }
                    
                    // Call the function on page load
                    updateViewCounter();
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    // Counters
                    
                    async function updateCounter(type) {
                        try {
                            const response = await fetch(`${scriptUrl}?sheet=counter&action=${type}`);
                            return await response.json();
                            } catch (error) {
                            console.error(`Error updating ${type} counter:`, error);
                        }
                    }
                    
                    
                    
                    async function getViews() {
                        try {
                            const response = await fetch(`${scriptUrl}?sheet=counter&action=getViews`);
                            const data = await response.json();
                            return data.count; // Return the views count
                            } catch (error) {
                            console.error('Error fetching views:', error);
                            return 0; // Fallback to 0 if the request fails
                        }
                    }
                    
                    
                    
function setupVisitorCounter() {
    if (typeof Storage !== 'undefined') {
        const visitorKey = 'csb_visitor';
        if (!localStorage.getItem(visitorKey)) {
            localStorage.setItem(visitorKey, '1');
            updateCounter('updateVisitors').then(data => {
                document.getElementById('visitorCounter').innerHTML = `Users:<span style="color: white;">${String(data.count).padStart(4, '0')}</span>`;
            });
        } else {
            updateCounter('getVisitors').then(data => {
                document.getElementById('visitorCounter').innerHTML = `Users:<span style="color: white;">${String(data.count).padStart(4, '0')}</span>`;
            });
        }
    }
}

                    
                    
                    // Client-side JavaScript
                    function setupLikeButton() {
                        const likeIcon = document.getElementById('likeIcon');
                        const likeCounterElement = document.getElementById('likeCounter');
                        const likeKey = 'csb_like';
                        
                        updateCounter('getLikes').then(data => {
                            likeCounterElement.textContent = String(data.count).padStart(3, '0');
                        });
                        
                        if (localStorage.getItem(likeKey)) {
                            likeIcon.classList.add('liked');
                        }
                        
                        document.getElementById('likeContainer').addEventListener('click', () => {
                            if (!localStorage.getItem(likeKey)) {
                                updateCounter('incrementLikes').then(data => {
                                    localStorage.setItem(likeKey, 'true');
                                    likeIcon.classList.add('liked');
                                    animateCounter(likeCounterElement, String(data.count).padStart(3, '0'));
                                    showFeedback('Thank you!');
                                });
                                } else {
                                updateCounter('decrementLikes').then(data => {
                                    localStorage.removeItem(likeKey);
                                    likeIcon.classList.remove('liked');
                                    animateCounter(likeCounterElement, String(data.count).padStart(3, '0'));
                                });
                            }
                        });
                    }
                    
                    // New animation handler
                    function animateCounter(element, newValue) {
                        element.classList.remove('like-animate');
                        // Trigger reflow to reset animation
                        void element.offsetWidth;
                        element.textContent = newValue;
                        element.classList.add('like-animate');
                    }
                    
                    
                    
                    
                    
                    async function initializeOrderNumber() {
                        try {
                            const response = await fetch(`${scriptUrl}?sheet=counter&action=getOrders`);
                            const data = await response.json();
                            cachedOrderNumber = data.count; // Store the current order number
                            } catch (error) {
                            console.error('Failed to fetch order number:', error);
                            cachedOrderNumber = 0; // Fallback to 0 if the request fails
                        }
                    }
                    
function setupViewsCounter() {
    if (typeof Storage !== 'undefined') {
        const viewsKey = 'csb_views';
        if (!localStorage.getItem(viewsKey)) {
            // If the user is new, update the views counter
            localStorage.setItem(viewsKey, '1');
            updateCounter('updateViews').then(data => {
                document.getElementById('viewsCounter').innerHTML = `Views:<span style="color: white;">${String(data.count).padStart(4, '0')}</span>`;
            });
        } else {
            // If the user is returning, just fetch the current views count
            updateCounter('getViews').then(data => {
                document.getElementById('viewsCounter').innerHTML = `Views:<span style="color: white;">${String(data.count).padStart(4, '0')}</span>`;
            });
        }
    }
}

                    
                    
                    
                    
                    // Initialize counters when the page loads
                    document.addEventListener('DOMContentLoaded', () => {
                        
                        
                        // Setup visitor counter
                        setupVisitorCounter();
                        
                        // Setup like button
                        setupLikeButton();
                        
                        initializeOrderNumber();
                        
                        setupViewsCounter();
                    });
                    
                    
                    </script>        
                    <script src="app.js"></script> <!-- Ensure app.js is correctly linked -->
                    </body>
                    </html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
